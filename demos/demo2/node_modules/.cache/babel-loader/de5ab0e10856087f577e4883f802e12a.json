{"ast":null,"code":"import \"antd/lib/transfer/style\";\nimport _Transfer from \"antd/lib/transfer\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/card/style\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport \"antd/lib/tree/style\";\nimport _Tree from \"antd/lib/tree\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nvar _jsxFileName = \"/Users/xumeihong/Documents/code/git/react/demos/demo2/src/pages/permission/index.js\";\nimport React from 'react';\nimport BaseTable from '../../components/BaseTable/index';\nimport Utils from '../../utils/utils';\nimport Axios from '../../axios/index';\nimport menuConfig from '../../config/menuConfig';\nconst FormItem = _Form.Item;\nconst Option = _Select.Option;\nconst {\n  TreeNode\n} = _Tree;\nexport default class PermissionUser extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isRoleVisible: false,\n      isPermVisible: false\n    };\n\n    this.renderTreeNodes = menuConfig => {\n      return menuConfig.map(item => {\n        if (\"children\" in item) {\n          return /*#__PURE__*/React.createElement(TreeNode, {\n            key: item.key,\n            title: item.title,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 28,\n              columnNumber: 24\n            }\n          }, this.renderTreeNodes(item.children));\n        }\n\n        return /*#__PURE__*/React.createElement(TreeNode, Object.assign({\n          key: item.key\n        }, item, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 20\n          }\n        }));\n      });\n    };\n\n    this.getCheckedKeys = () => {};\n\n    this.handleRole = () => {\n      this.setState({\n        isRoleVisible: true\n      });\n    };\n\n    this.handleRoleSubmit = () => {\n      Axios.ajax({\n        url: '/role/create',\n        data: {\n          params: ''\n        }\n      }).then(res => {\n        this.setState({\n          isRoleVisible: false\n        });\n\n        _message.success(res.message);\n      });\n      Axios.requestList(this, '/role/list');\n    };\n\n    this.handlePermission = () => {\n      let item = this.state.selectedItem;\n\n      if (!item) {\n        _Modal.info({\n          title: \"请先选择一个角色\"\n        });\n\n        return;\n      }\n\n      this.setState({\n        isPermVisible: true,\n        detailInfo: item,\n        menuInfo: item.menus\n      });\n    };\n\n    this.handleUserAuth = () => {\n      let item = this.state.selectedItem;\n\n      if (!item) {\n        _Modal.info({\n          title: \"请先选择一个角色\"\n        });\n\n        return;\n      }\n\n      this.setState({\n        isUserVisible: true,\n        detailInfo: item\n      });\n      this.getRoleUserList(item.id);\n    };\n\n    this.getRoleUserList = id => {\n      Axios.ajax({\n        url: '/role/userList',\n        data: {\n          params: {\n            id\n          }\n        }\n      }).then(res => {\n        if (res.result) {\n          this.getAuthUserList(res.result);\n        }\n      });\n    };\n\n    this.getAuthUserList = data => {\n      const mockData = [];\n      const targetKeys = [];\n\n      if (data) {\n        data.forEach(item => {\n          const temp = {\n            key: item.userId,\n            title: item.userName,\n            status: item.status\n          };\n\n          if (temp.status == 1) {\n            targetKeys.push(temp.key);\n          }\n\n          mockData.push(temp);\n        });\n      }\n\n      this.setState({\n        mockData,\n        targetKeys\n      });\n    };\n\n    this.handlePerEditSubmit = () => {\n      let permEditInfo = this.permForm.props.form.getFieldsValue();\n      permEditInfo.id = this.state.selectedItem.id;\n      permEditInfo.menus = this.state.menuInfo;\n      Axios.ajax({\n        url: '/permission/edit',\n        data: {\n          params: permEditInfo\n        }\n      }).then(res => {\n        this.setState({\n          isPermVisible: false,\n          selectedRowKeys: [],\n          selectedItem: null\n        });\n\n        _message.success(res.result);\n      });\n      Axios.requestList(this, '/role/list');\n    };\n\n    this.handleRoleAuthSubmit = () => {\n      let roleAuthInfo = {};\n      roleAuthInfo.userIds = this.state.targetKeys;\n      roleAuthInfo.roleId = this.state.selectedItem.id;\n      Axios.ajax({\n        url: '/role/userRoleList',\n        data: {\n          params: { ...roleAuthInfo\n          }\n        }\n      }).then(res => {\n        this.setState({\n          isUserVisible: false,\n          selectedItem: null,\n          selectedRowKeys: []\n        });\n        Axios.requestList(this, '/role/list');\n\n        _message.success(res.result);\n      });\n    };\n  }\n\n  componentWillMount() {\n    Axios.requestList(this, '/role/list');\n  } // 获取treeNode的全部默认展示\n\n\n  render() {\n    const columns = [{\n      title: \"角色id\",\n      dataIndex: 'id'\n    }, {\n      title: \"角色名称\",\n      dataIndex: 'roleName'\n    }, {\n      title: \"创建时间\",\n      dataIndex: 'createTime'\n    }, {\n      title: \"使用状态\",\n      dataIndex: 'status',\n      render: status => {\n        return status == 1 ? '启用' : '禁用';\n      }\n    }, {\n      title: \"授权时间\",\n      dataIndex: 'authorizeTime'\n    }, {\n      title: \"授权人\",\n      dataIndex: 'authorizeUserName'\n    }];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(_Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.handleRole,\n      style: {\n        marginRight: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 21\n      }\n    }, \"\\u521B\\u5EFA\\u89D2\\u8272\"), /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.handlePermission,\n      style: {\n        marginRight: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 21\n      }\n    }, \"\\u8BBE\\u7F6E\\u6743\\u9650\"), /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.handleUserAuth,\n      style: {\n        marginRight: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 21\n      }\n    }, \"\\u7528\\u6237\\u6388\\u6743\")), /*#__PURE__*/React.createElement(BaseTable, {\n      rowSelectionType: \"radio\",\n      selectedRowKeys: this.state.selectedRowKeys,\n      dataSource: this.state.list,\n      columns: columns,\n      updateSelectItem: Utils.updateSelectItem.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(_Modal, {\n      title: \"\\u521B\\u5EFA\\u89D2\\u8272\",\n      visible: this.state.isRoleVisible,\n      onCancel: () => {\n        this.roleform.props.form.resetFields();\n        this.setState({\n          isRoleVisible: false\n        });\n      },\n      onOk: this.handleRoleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(RoleForm, {\n      wrappedComponentRef: roleform => {\n        this.roleform = roleform;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(_Modal, {\n      title: \"\\u8BBE\\u7F6E\\u6743\\u9650\",\n      visible: this.state.isPermVisible,\n      width: 600,\n      onCancel: () => {\n        this.setState({\n          isPermVisible: false\n        });\n      },\n      onOk: this.handlePerEditSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(PermForm, {\n      wrappedComponentRef: permForm => {\n        this.permForm = permForm;\n      },\n      detailInfo: this.state.detailInfo,\n      menuInfo: this.state.menuInfo,\n      treeData: this.renderTreeNodes(menuConfig),\n      patchMenuInfo: checkedKeys => {\n        this.setState({\n          menuInfo: checkedKeys\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(_Modal, {\n      title: \"\\u7528\\u6237\\u6388\\u6743\",\n      visible: this.state.isUserVisible,\n      width: 600,\n      onCancel: () => {\n        this.setState({\n          isUserVisible: false\n        });\n      },\n      onOk: this.handleRoleAuthSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(RoleAuthForm, {\n      wrappedComponentRef: roleAuthForm => {\n        this.roleAuthForm = roleAuthForm;\n      },\n      detailInfo: this.state.detailInfo,\n      mockData: this.state.mockData,\n      targetKeys: this.state.targetKeys,\n      handleChange: targetKeys => this.setState({\n        targetKeys\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nclass RoleForm extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.getState = state => {\n      return {\n        '1': '咸鱼一条',\n        '2': '北大才子',\n        '3': '令狐冲',\n        '4': '东方不败',\n        '5': '白眉道长'\n      }[state];\n    };\n\n    this.getSex = sex => {\n      return sex == 1 ? '男' : '女';\n    };\n  }\n\n  render() {\n    let {\n      getFieldDecorator\n    } = this.props.form;\n    let type = this.props.type;\n    let userInfo = this.props.userInfo || {};\n    const formItemLayout = {\n      labelCol: {\n        span: 5\n      },\n      wrapperCol: {\n        span: 19\n      }\n    };\n    return /*#__PURE__*/React.createElement(_Form, {\n      layout: \"horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u89D2\\u8272\\u540D\\u79F0\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 17\n      }\n    }), getFieldDecorator('roleName', {})( /*#__PURE__*/React.createElement(_Input, {\n      type: \"text\",\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u89D2\\u8272\\u540D\\u79F0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u72B6\\u6001\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 17\n      }\n    }), getFieldDecorator('state')( /*#__PURE__*/React.createElement(_Select, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 33\n      }\n    }, \"\\u5F00\\u542F\"), /*#__PURE__*/React.createElement(Option, {\n      value: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 33\n      }\n    }, \"\\u5173\\u95ED\")))));\n  }\n\n}\n\nRoleForm = _Form.create({})(RoleForm);\n\nclass PermForm extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.onCheck = checkedKeys => {\n      this.props.patchMenuInfo(checkedKeys);\n    };\n  }\n\n  render() {\n    let detailInfo = this.props.detailInfo;\n    const formItemLayout = {\n      labelCol: {\n        span: 5\n      },\n      wrapperCol: {\n        span: 19\n      }\n    };\n    let {\n      getFieldDecorator\n    } = this.props.form;\n    return /*#__PURE__*/React.createElement(_Form, {\n      layout: \"horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u89D2\\u8272\\u540D\\u79F0\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 17\n      }\n    }), getFieldDecorator(\"roleName\", {})( /*#__PURE__*/React.createElement(_Input, {\n      placeholder: detailInfo.roleName,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u72B6\\u6001\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 17\n      }\n    }), getFieldDecorator(\"status\", {\n      initialValue: detailInfo.status\n    })( /*#__PURE__*/React.createElement(_Select, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 33\n      }\n    }, \"\\u7981\\u7528\"), /*#__PURE__*/React.createElement(Option, {\n      value: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 33\n      }\n    }, \"\\u542F\\u7528\")))), /*#__PURE__*/React.createElement(_Tree, {\n      checkable: true,\n      defaultExpandAll: true,\n      checkedKeys: this.props.menuInfo,\n      onCheck: checkedKeys => {\n        this.onCheck(checkedKeys);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TreeNode, {\n      title: \"\\u5E73\\u53F0\\u6743\\u9650\",\n      key: \"platForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 21\n      }\n    }, this.props.treeData)));\n  }\n\n}\n\nPermForm = _Form.create({})(PermForm);\n\nclass RoleAuthForm extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.filterOption = (inputValue, option) => option.title.indexOf(inputValue) > -1;\n\n    this.handleChange = targetKeys => {\n      this.props.handleChange(targetKeys);\n    };\n  }\n\n  render() {\n    const {\n      getFieldDecorator\n    } = this.props.form;\n    const formItemLayout = {\n      labelCol: {\n        span: 5\n      },\n      wrapperCol: {\n        span: 19\n      }\n    };\n    return /*#__PURE__*/React.createElement(_Form, {\n      layout: \"horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u89D2\\u8272\\u540D\\u79F0\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 17\n      }\n    }), getFieldDecorator(\"roleName\", {})( /*#__PURE__*/React.createElement(_Input, {\n      placeholder: this.props.detailInfo.roleName,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u9009\\u62E9\\u7528\\u6237\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(_Transfer, {\n      listStyle: {\n        width: 150,\n        height: 400\n      },\n      dataSource: this.props.mockData,\n      titles: ['Source', 'Target'],\n      targetKeys: this.props.targetKeys,\n      showSearch: true,\n      searchPlaceholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\",\n      filterOption: this.filterOption // render才能让dataSource中每项title的名称渲染出来\n      ,\n      render: item => item.title,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nRoleAuthForm = _Form.create({})(RoleAuthForm);","map":{"version":3,"sources":["/Users/xumeihong/Documents/code/git/react/demos/demo2/src/pages/permission/index.js"],"names":["React","BaseTable","Utils","Axios","menuConfig","FormItem","Item","Option","TreeNode","PermissionUser","Component","state","isRoleVisible","isPermVisible","renderTreeNodes","map","item","key","title","children","getCheckedKeys","handleRole","setState","handleRoleSubmit","ajax","url","data","params","then","res","success","message","requestList","handlePermission","selectedItem","info","detailInfo","menuInfo","menus","handleUserAuth","isUserVisible","getRoleUserList","id","result","getAuthUserList","mockData","targetKeys","forEach","temp","userId","userName","status","push","handlePerEditSubmit","permEditInfo","permForm","props","form","getFieldsValue","selectedRowKeys","handleRoleAuthSubmit","roleAuthInfo","userIds","roleId","componentWillMount","render","columns","dataIndex","marginRight","list","updateSelectItem","bind","roleform","resetFields","checkedKeys","roleAuthForm","RoleForm","getState","getSex","sex","getFieldDecorator","type","userInfo","formItemLayout","labelCol","span","wrapperCol","create","PermForm","onCheck","patchMenuInfo","roleName","initialValue","treeData","RoleAuthForm","filterOption","inputValue","option","indexOf","handleChange","width","height"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Card, Button, Modal, Form, Input, Select, message, Tree, Transfer } from 'antd'\nimport BaseTable from '../../components/BaseTable/index'\nimport Utils from '../../utils/utils'\nimport Axios from '../../axios/index'\nimport menuConfig from '../../config/menuConfig'\n\n\nconst FormItem = Form.Item;\nconst Option = Select.Option;\nconst { TreeNode } = Tree;\n\nexport default class PermissionUser extends React.Component {\n\n    state = {\n        isRoleVisible: false,\n        isPermVisible: false\n    }\n\n    componentWillMount() {\n        Axios.requestList(this, '/role/list');\n    }\n\n    // 获取treeNode的全部默认展示\n    renderTreeNodes = menuConfig => {\n        return menuConfig.map((item) => {\n            if (\"children\" in item) {\n                return <TreeNode key={item.key} title={item.title}>\n                    {this.renderTreeNodes(item.children)}\n                </TreeNode>\n            }\n            return <TreeNode key={item.key} {...item} />\n        })\n    }\n\n    // 获取treeNode已选中项\n    getCheckedKeys = () => {\n\n    }\n    // 展示创建角色框\n    handleRole = () => {\n        this.setState({\n            isRoleVisible: true\n        })\n    }\n\n    // 提交创建角色表单\n    handleRoleSubmit = () => {\n        Axios.ajax({\n            url: '/role/create',\n            data: {\n                params: ''\n            }\n        }).then(res => {\n            this.setState({\n                isRoleVisible: false\n            })\n            message.success(res.message);\n        });\n        Axios.requestList(this, '/role/list');\n    }\n\n    // 权限设置\n    handlePermission = () => {\n        let item = this.state.selectedItem;\n        if (!item) {\n            Modal.info({\n                title: \"请先选择一个角色\"\n            });\n            return;\n        }\n        this.setState({\n            isPermVisible: true,\n            detailInfo: item,\n            menuInfo: item.menus,\n        })\n    }\n\n\n    // 用户授权\n    handleUserAuth = () => {\n        let item = this.state.selectedItem;\n        if (!item) {\n            Modal.info({\n                title: \"请先选择一个角色\"\n            });\n            return;\n        }\n        this.setState({\n            isUserVisible: true,\n            detailInfo: item\n        })\n        this.getRoleUserList(item.id);\n    }\n\n    // 获取角色授权列表\n    getRoleUserList = (id) => {\n        Axios.ajax({\n            url: '/role/userList',\n            data: {\n                params: {\n                    id\n                }\n            }\n        }).then(res => {\n            if (res.result) {\n                this.getAuthUserList(res.result);\n            }\n        })\n    }\n\n    // 刷选目标用户\n    getAuthUserList = (data) => {\n        const mockData = [];\n        const targetKeys = [];\n        if (data) {\n            data.forEach((item) => {\n                const temp = {\n                    key: item.userId,\n                    title: item.userName,\n                    status: item.status\n\n                }\n                if (temp.status == 1) {\n                    targetKeys.push(temp.key);\n                }\n                mockData.push(temp);\n            })\n        }\n        this.setState({\n            mockData,\n            targetKeys\n        })\n    }\n\n    // 权限编辑提交\n    handlePerEditSubmit = () => {\n        let permEditInfo = this.permForm.props.form.getFieldsValue();\n        permEditInfo.id = this.state.selectedItem.id;\n        permEditInfo.menus = this.state.menuInfo;\n        Axios.ajax({\n            url: '/permission/edit',\n            data: {\n                params: permEditInfo\n            }\n        }).then((res) => {\n            this.setState({\n                isPermVisible: false,\n                selectedRowKeys: [],\n                selectedItem: null\n            })\n            message.success(res.result);\n        });\n\n        Axios.requestList(this, '/role/list');\n    }\n\n\n    // 用户授权提交\n    handleRoleAuthSubmit = ()=>{\n        let roleAuthInfo = {}\n        roleAuthInfo.userIds = this.state.targetKeys;\n        roleAuthInfo.roleId = this.state.selectedItem.id;\n        Axios.ajax({\n            url: '/role/userRoleList',\n            data: {\n                params:{\n                    ...roleAuthInfo\n                }\n            }\n        }).then(res => {\n            this.setState({\n                isUserVisible: false,\n                selectedItem: null,\n                selectedRowKeys: []\n            })\n            Axios.requestList(this, '/role/list');\n            message.success(res.result);\n        })\n    }\n    render() {\n        const columns = [\n            {\n                title: \"角色id\",\n                dataIndex: 'id'\n            },\n            {\n                title: \"角色名称\",\n                dataIndex: 'roleName'\n            },\n            {\n                title: \"创建时间\",\n                dataIndex: 'createTime'\n            },\n            {\n                title: \"使用状态\",\n                dataIndex: 'status',\n                render: (status) => {\n                    return status == 1 ? '启用' : '禁用'\n                }\n            },\n            {\n                title: \"授权时间\",\n                dataIndex: 'authorizeTime',\n            }, {\n                title: \"授权人\",\n                dataIndex: 'authorizeUserName'\n            }\n        ];\n        return (\n            <div>\n                <Card>\n                    <Button type=\"primary\" onClick={this.handleRole} style={{ marginRight: 10 }}>创建角色</Button>\n                    <Button type=\"primary\" onClick={this.handlePermission} style={{ marginRight: 10 }}>设置权限</Button>\n                    <Button type=\"primary\" onClick={this.handleUserAuth} style={{ marginRight: 10 }}>用户授权</Button>\n                </Card>\n                <BaseTable\n                    rowSelectionType='radio'\n                    selectedRowKeys={this.state.selectedRowKeys}\n                    dataSource={this.state.list}\n                    columns={columns}\n                    updateSelectItem={Utils.updateSelectItem.bind(this)}\n                >\n                </BaseTable>\n                <Modal\n                    title=\"创建角色\"\n                    visible={this.state.isRoleVisible}\n                    onCancel={() => {\n                        this.roleform.props.form.resetFields();\n                        this.setState({\n                            isRoleVisible: false\n                        })\n                    }}\n                    onOk={this.handleRoleSubmit}\n                >\n                    <RoleForm wrappedComponentRef={(roleform) => { this.roleform = roleform }} />\n                </Modal>\n                <Modal\n                    title=\"设置权限\"\n                    visible={this.state.isPermVisible}\n                    width={600}\n                    onCancel={() => {\n                        this.setState({\n                            isPermVisible: false\n                        })\n                    }}\n                    onOk={this.handlePerEditSubmit}\n                >\n                    <PermForm\n                        wrappedComponentRef={(permForm) => { this.permForm = permForm }}\n                        detailInfo={this.state.detailInfo}\n                        menuInfo={this.state.menuInfo}\n                        treeData={this.renderTreeNodes(menuConfig)}\n                        patchMenuInfo={(checkedKeys) => {\n                            this.setState({\n                                menuInfo: checkedKeys\n                            })\n                        }}\n                    />\n                </Modal>\n                <Modal\n                    title=\"用户授权\"\n                    visible={this.state.isUserVisible}\n                    width={600}\n                    onCancel={() => {\n                        this.setState({\n                            isUserVisible: false\n                        })\n                    }}\n                    onOk={this.handleRoleAuthSubmit}\n                >\n                    <RoleAuthForm\n                        wrappedComponentRef={(roleAuthForm) => { this.roleAuthForm = roleAuthForm }}\n                        detailInfo={this.state.detailInfo}\n                        mockData={this.state.mockData}\n                        targetKeys={this.state.targetKeys}\n                        handleChange={targetKeys => this.setState({ targetKeys })}\n                    />\n                </Modal>\n            </div>\n        );\n    }\n}\n\nclass RoleForm extends React.Component {\n\n    getState = (state) => {\n        return {\n            '1': '咸鱼一条',\n            '2': '北大才子',\n            '3': '令狐冲',\n            '4': '东方不败',\n            '5': '白眉道长',\n        }[state];\n    }\n\n    getSex = sex => {\n        return sex == 1 ? '男' : '女';\n    }\n    render() {\n        let { getFieldDecorator } = this.props.form;\n        let type = this.props.type;\n        let userInfo = this.props.userInfo || {};\n        const formItemLayout = {\n            labelCol: {\n                span: 5\n            },\n            wrapperCol: {\n                span: 19\n            }\n        }\n        return (\n            <Form layout=\"horizontal\">\n                <FormItem label=\"角色名称\" {...formItemLayout}>\n                    {\n                        getFieldDecorator('roleName', {\n                        })(\n                            <Input type=\"text\" placeholder=\"请输入角色名称\" />\n                        )\n                    }\n                </FormItem>\n                <FormItem label=\"状态\" {...formItemLayout}>\n                    {\n                        getFieldDecorator('state')(\n                            <Select>\n                                <Option value={1}>开启</Option>\n                                <Option value={0}>关闭</Option>\n                            </Select>\n                        )\n                    }\n                </FormItem>\n            </Form>\n        );\n    }\n}\n\nRoleForm = Form.create({})(RoleForm);\n\nclass PermForm extends React.Component {\n\n    onCheck = (checkedKeys) => {\n        this.props.patchMenuInfo(checkedKeys)\n    }\n\n    render() {\n        let detailInfo = this.props.detailInfo\n        const formItemLayout = {\n            labelCol: {\n                span: 5\n            },\n            wrapperCol: {\n                span: 19\n            }\n        }\n        let { getFieldDecorator } = this.props.form;\n        return (\n            <Form layout=\"horizontal\">\n                <FormItem label=\"角色名称\" {...formItemLayout}>\n                    {\n                        getFieldDecorator(\"roleName\", {})(\n                            <Input placeholder={detailInfo.roleName} disabled />\n                        )\n                    }\n                </FormItem>\n                <FormItem label=\"状态\" {...formItemLayout}>\n                    {\n                        getFieldDecorator(\"status\", {\n                            initialValue: detailInfo.status\n                        })(\n                            <Select>\n                                <Option value={0}>禁用</Option>\n                                <Option value={1}>启用</Option>\n                            </Select>\n                        )\n                    }\n                </FormItem>\n                <Tree\n                    checkable\n                    defaultExpandAll\n                    checkedKeys={this.props.menuInfo}\n                    onCheck={(checkedKeys) => {\n                        this.onCheck(checkedKeys)\n                    }}\n                >\n                    <TreeNode title=\"平台权限\" key=\"platForm\">\n                        {this.props.treeData}\n                    </TreeNode>\n\n                </Tree>\n\n            </Form>\n        );\n    }\n}\nPermForm = Form.create({})(PermForm);\n\nclass RoleAuthForm extends React.Component {\n\n\n    filterOption = (inputValue, option) => option.title.indexOf(inputValue) > -1;\n    handleChange = targetKeys => {\n        this.props.handleChange(targetKeys)\n    };\n    render() {\n        const { getFieldDecorator } = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                span: 5\n            },\n            wrapperCol: {\n                span: 19\n            }\n        }\n        return (\n            <Form layout=\"horizontal\">\n                <FormItem label=\"角色名称\" {...formItemLayout}>\n                    {\n                        getFieldDecorator(\"roleName\", {})(\n                            <Input placeholder={this.props.detailInfo.roleName} disabled />\n                        )\n                    }\n                </FormItem>\n                <FormItem label=\"选择用户\" {...formItemLayout}>\n                    <Transfer\n                        listStyle={{ width: 150, height: 400 }}\n                        dataSource={this.props.mockData}\n                        titles={['Source', 'Target']}\n                        targetKeys={this.props.targetKeys}\n                        showSearch\n                        searchPlaceholder=\"请输入用户名\"\n                        filterOption={this.filterOption}\n                        // render才能让dataSource中每项title的名称渲染出来\n                        render={item => item.title}\n                        onChange={this.handleChange}\n                    />\n                </FormItem>\n\n            </Form>\n\n        );\n    }\n}\nRoleAuthForm = Form.create({})(RoleAuthForm);\n"]},"metadata":{},"sourceType":"module"}