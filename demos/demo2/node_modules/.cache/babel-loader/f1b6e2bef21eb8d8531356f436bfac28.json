{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames2 = require('classnames');\n\nvar _classnames3 = _interopRequireDefault(_classnames2);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _componentDidUpdate(component, init) {\n  var _component$props = component.props,\n      styles = _component$props.styles,\n      panels = _component$props.panels,\n      activeKey = _component$props.activeKey,\n      direction = _component$props.direction;\n  var rootNode = component.props.getRef('root');\n  var wrapNode = component.props.getRef('nav') || rootNode;\n  var inkBarNode = component.props.getRef('inkBar');\n  var activeTab = component.props.getRef('activeTab');\n  var inkBarNodeStyle = inkBarNode.style;\n  var tabBarPosition = component.props.tabBarPosition;\n  var activeIndex = (0, _utils.getActiveIndex)(panels, activeKey);\n\n  if (init) {\n    // prevent mount animation\n    inkBarNodeStyle.display = 'none';\n  }\n\n  if (activeTab) {\n    var tabNode = activeTab;\n    var transformSupported = (0, _utils.isTransform3dSupported)(inkBarNodeStyle); // Reset current style\n\n    (0, _utils.setTransform)(inkBarNodeStyle, '');\n    inkBarNodeStyle.width = '';\n    inkBarNodeStyle.height = '';\n    inkBarNodeStyle.left = '';\n    inkBarNodeStyle.top = '';\n    inkBarNodeStyle.bottom = '';\n    inkBarNodeStyle.right = '';\n\n    if (tabBarPosition === 'top' || tabBarPosition === 'bottom') {\n      var left = (0, _utils.getLeft)(tabNode, wrapNode);\n      var width = tabNode.offsetWidth; // If tabNode'width width equal to wrapNode'width when tabBarPosition is top or bottom\n      // It means no css working, then ink bar should not have width until css is loaded\n      // Fix https://github.com/ant-design/ant-design/issues/7564\n\n      if (width === rootNode.offsetWidth) {\n        width = 0;\n      } else if (styles.inkBar && styles.inkBar.width !== undefined) {\n        width = parseFloat(styles.inkBar.width, 10);\n\n        if (width) {\n          left += (tabNode.offsetWidth - width) / 2;\n        }\n      }\n\n      if (direction === 'rtl') {\n        left = (0, _utils.getStyle)(tabNode, 'margin-left') - left;\n      } // use 3d gpu to optimize render\n\n\n      if (transformSupported) {\n        (0, _utils.setTransform)(inkBarNodeStyle, 'translate3d(' + left + 'px,0,0)');\n      } else {\n        inkBarNodeStyle.left = left + 'px';\n      }\n\n      inkBarNodeStyle.width = width + 'px';\n    } else {\n      var top = (0, _utils.getTop)(tabNode, wrapNode, true);\n      var height = tabNode.offsetHeight;\n\n      if (styles.inkBar && styles.inkBar.height !== undefined) {\n        height = parseFloat(styles.inkBar.height, 10);\n\n        if (height) {\n          top += (tabNode.offsetHeight - height) / 2;\n        }\n      }\n\n      if (transformSupported) {\n        (0, _utils.setTransform)(inkBarNodeStyle, 'translate3d(0,' + top + 'px,0)');\n        inkBarNodeStyle.top = '0';\n      } else {\n        inkBarNodeStyle.top = top + 'px';\n      }\n\n      inkBarNodeStyle.height = height + 'px';\n    }\n  }\n\n  inkBarNodeStyle.display = activeIndex !== -1 ? 'block' : 'none';\n}\n\nvar InkTabBarNode = function (_React$Component) {\n  (0, _inherits3['default'])(InkTabBarNode, _React$Component);\n\n  function InkTabBarNode() {\n    (0, _classCallCheck3['default'])(this, InkTabBarNode);\n    return (0, _possibleConstructorReturn3['default'])(this, (InkTabBarNode.__proto__ || Object.getPrototypeOf(InkTabBarNode)).apply(this, arguments));\n  }\n\n  (0, _createClass3['default'])(InkTabBarNode, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this; // ref https://github.com/ant-design/ant-design/issues/8678\n      // ref https://github.com/react-component/tabs/issues/135\n      // InkTabBarNode need parent/root ref for calculating position\n      // since parent componentDidMount triggered after child componentDidMount\n      // we're doing a quick fix here to use setTimeout to calculate position\n      // after parent/root component mounted\n\n\n      this.timeout = setTimeout(function () {\n        _componentDidUpdate(_this2, true);\n      }, 0);\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      _componentDidUpdate(this);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      clearTimeout(this.timeout);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _classnames;\n\n      var _props = this.props,\n          prefixCls = _props.prefixCls,\n          styles = _props.styles,\n          inkBarAnimated = _props.inkBarAnimated;\n      var className = prefixCls + '-ink-bar';\n      var classes = (0, _classnames3['default'])((_classnames = {}, (0, _defineProperty3['default'])(_classnames, className, true), (0, _defineProperty3['default'])(_classnames, inkBarAnimated ? className + '-animated' : className + '-no-animated', true), _classnames));\n      return _react2['default'].createElement('div', {\n        style: styles.inkBar,\n        className: classes,\n        key: 'inkBar',\n        ref: this.props.saveRef('inkBar')\n      });\n    }\n  }]);\n  return InkTabBarNode;\n}(_react2['default'].Component);\n\nexports['default'] = InkTabBarNode;\nInkTabBarNode.propTypes = {\n  prefixCls: _propTypes2['default'].string,\n  styles: _propTypes2['default'].object,\n  inkBarAnimated: _propTypes2['default'].bool,\n  saveRef: _propTypes2['default'].func,\n  direction: _propTypes2['default'].string\n};\nInkTabBarNode.defaultProps = {\n  prefixCls: '',\n  inkBarAnimated: true,\n  styles: {},\n  saveRef: function saveRef() {}\n};\nmodule.exports = exports['default'];","map":{"version":3,"sources":["/Users/xumeihong/Documents/code/git/react/demos/demo2/node_modules/rc-tabs/lib/InkTabBarNode.js"],"names":["Object","defineProperty","exports","value","_defineProperty2","require","_defineProperty3","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_propTypes","_propTypes2","_classnames2","_classnames3","_utils","obj","__esModule","_componentDidUpdate","component","init","_component$props","props","styles","panels","activeKey","direction","rootNode","getRef","wrapNode","inkBarNode","activeTab","inkBarNodeStyle","style","tabBarPosition","activeIndex","getActiveIndex","display","tabNode","transformSupported","isTransform3dSupported","setTransform","width","height","left","top","bottom","right","getLeft","offsetWidth","inkBar","undefined","parseFloat","getStyle","getTop","offsetHeight","InkTabBarNode","_React$Component","__proto__","getPrototypeOf","apply","arguments","key","componentDidMount","_this2","timeout","setTimeout","componentDidUpdate","componentWillUnmount","clearTimeout","render","_classnames","_props","prefixCls","inkBarAnimated","className","classes","createElement","ref","saveRef","Component","propTypes","string","object","bool","func","defaultProps","module"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames2 = require('classnames');\n\nvar _classnames3 = _interopRequireDefault(_classnames2);\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _componentDidUpdate(component, init) {\n  var _component$props = component.props,\n      styles = _component$props.styles,\n      panels = _component$props.panels,\n      activeKey = _component$props.activeKey,\n      direction = _component$props.direction;\n\n  var rootNode = component.props.getRef('root');\n  var wrapNode = component.props.getRef('nav') || rootNode;\n  var inkBarNode = component.props.getRef('inkBar');\n  var activeTab = component.props.getRef('activeTab');\n  var inkBarNodeStyle = inkBarNode.style;\n  var tabBarPosition = component.props.tabBarPosition;\n  var activeIndex = (0, _utils.getActiveIndex)(panels, activeKey);\n  if (init) {\n    // prevent mount animation\n    inkBarNodeStyle.display = 'none';\n  }\n  if (activeTab) {\n    var tabNode = activeTab;\n    var transformSupported = (0, _utils.isTransform3dSupported)(inkBarNodeStyle);\n\n    // Reset current style\n    (0, _utils.setTransform)(inkBarNodeStyle, '');\n    inkBarNodeStyle.width = '';\n    inkBarNodeStyle.height = '';\n    inkBarNodeStyle.left = '';\n    inkBarNodeStyle.top = '';\n    inkBarNodeStyle.bottom = '';\n    inkBarNodeStyle.right = '';\n\n    if (tabBarPosition === 'top' || tabBarPosition === 'bottom') {\n      var left = (0, _utils.getLeft)(tabNode, wrapNode);\n      var width = tabNode.offsetWidth;\n\n      // If tabNode'width width equal to wrapNode'width when tabBarPosition is top or bottom\n      // It means no css working, then ink bar should not have width until css is loaded\n      // Fix https://github.com/ant-design/ant-design/issues/7564\n      if (width === rootNode.offsetWidth) {\n        width = 0;\n      } else if (styles.inkBar && styles.inkBar.width !== undefined) {\n        width = parseFloat(styles.inkBar.width, 10);\n        if (width) {\n          left += (tabNode.offsetWidth - width) / 2;\n        }\n      }\n      if (direction === 'rtl') {\n        left = (0, _utils.getStyle)(tabNode, 'margin-left') - left;\n      }\n      // use 3d gpu to optimize render\n      if (transformSupported) {\n        (0, _utils.setTransform)(inkBarNodeStyle, 'translate3d(' + left + 'px,0,0)');\n      } else {\n        inkBarNodeStyle.left = left + 'px';\n      }\n      inkBarNodeStyle.width = width + 'px';\n    } else {\n      var top = (0, _utils.getTop)(tabNode, wrapNode, true);\n      var height = tabNode.offsetHeight;\n      if (styles.inkBar && styles.inkBar.height !== undefined) {\n        height = parseFloat(styles.inkBar.height, 10);\n        if (height) {\n          top += (tabNode.offsetHeight - height) / 2;\n        }\n      }\n      if (transformSupported) {\n        (0, _utils.setTransform)(inkBarNodeStyle, 'translate3d(0,' + top + 'px,0)');\n        inkBarNodeStyle.top = '0';\n      } else {\n        inkBarNodeStyle.top = top + 'px';\n      }\n      inkBarNodeStyle.height = height + 'px';\n    }\n  }\n  inkBarNodeStyle.display = activeIndex !== -1 ? 'block' : 'none';\n}\n\nvar InkTabBarNode = function (_React$Component) {\n  (0, _inherits3['default'])(InkTabBarNode, _React$Component);\n\n  function InkTabBarNode() {\n    (0, _classCallCheck3['default'])(this, InkTabBarNode);\n    return (0, _possibleConstructorReturn3['default'])(this, (InkTabBarNode.__proto__ || Object.getPrototypeOf(InkTabBarNode)).apply(this, arguments));\n  }\n\n  (0, _createClass3['default'])(InkTabBarNode, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // ref https://github.com/ant-design/ant-design/issues/8678\n      // ref https://github.com/react-component/tabs/issues/135\n      // InkTabBarNode need parent/root ref for calculating position\n      // since parent componentDidMount triggered after child componentDidMount\n      // we're doing a quick fix here to use setTimeout to calculate position\n      // after parent/root component mounted\n      this.timeout = setTimeout(function () {\n        _componentDidUpdate(_this2, true);\n      }, 0);\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      _componentDidUpdate(this);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      clearTimeout(this.timeout);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _classnames;\n\n      var _props = this.props,\n          prefixCls = _props.prefixCls,\n          styles = _props.styles,\n          inkBarAnimated = _props.inkBarAnimated;\n\n      var className = prefixCls + '-ink-bar';\n      var classes = (0, _classnames3['default'])((_classnames = {}, (0, _defineProperty3['default'])(_classnames, className, true), (0, _defineProperty3['default'])(_classnames, inkBarAnimated ? className + '-animated' : className + '-no-animated', true), _classnames));\n      return _react2['default'].createElement('div', {\n        style: styles.inkBar,\n        className: classes,\n        key: 'inkBar',\n        ref: this.props.saveRef('inkBar')\n      });\n    }\n  }]);\n  return InkTabBarNode;\n}(_react2['default'].Component);\n\nexports['default'] = InkTabBarNode;\n\n\nInkTabBarNode.propTypes = {\n  prefixCls: _propTypes2['default'].string,\n  styles: _propTypes2['default'].object,\n  inkBarAnimated: _propTypes2['default'].bool,\n  saveRef: _propTypes2['default'].func,\n  direction: _propTypes2['default'].string\n};\n\nInkTabBarNode.defaultProps = {\n  prefixCls: '',\n  inkBarAnimated: true,\n  styles: {},\n  saveRef: function saveRef() {}\n};\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}