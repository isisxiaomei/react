{"ast":null,"code":"import \"antd/lib/card/style\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/radio/style\";\nimport _Radio from \"antd/lib/radio\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nvar _jsxFileName = \"/Users/xumeihong/Documents/code/git/react/demos/demo2/src/pages/order/detail.js\";\nimport React from 'react';\nimport Axios from '../../axios/index';\nimport Utils from '../../utils/utils';\nconst FormItem = _Form.Item;\nconst Option = _Select.Option;\nconst RadioGroup = _Radio.Group;\nexport default class Detail extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {};\n\n    this.getDetailInfo = orderId => {\n      Axios.ajax({\n        url: '/order/detail',\n        data: {\n          param: {\n            orderId: orderId\n          }\n        }\n      }).then(res => {\n        this.setState({\n          orderInfo: res.result\n        });\n        this.renderMap(res.result);\n      });\n    };\n\n    this.renderMap = result => {\n      // 创建地图实例\n      this.map = new window.BMapGL.Map(\"orderDetailMap\"); // 初始化地图，设置中心点坐标(可以是坐标点对象，也可以是城市，具体参考方法)和地图缩放级别\n\n      this.map.centerAndZoom(new window.BMapGL.Point(116.404, 39.915), 11); // 设置地图控件\n\n      this.addMapControl(); // 绘制用户的行驶路线\n\n      this.drawBikeRoute(result.positionList); // 绘制可骑行区域\n\n      this.drawArea(result.areaList);\n    };\n\n    this.addMapControl = () => {\n      let map = this.map;\n      map.addControl(new window.BMapGL.ScaleControl({\n        anchor: window.BMapGL.BMAP_ANCHOR_TOP_RIGHT\n      }));\n      map.addControl(new window.BMapGL.ZoomControl({\n        anchor: window.BMapGL.BMAP_ANCHOR_TOP_RIGHT\n      }));\n    };\n\n    this.drawBikeRoute = positionList => {\n      // 起始结束位置打点\n      let map = this.map;\n      let startPoint = '';\n      let endPoint = '';\n\n      if (positionList.length > 0) {\n        let startPosition = positionList[0];\n        let endPosotion = positionList[positionList.length - 1];\n        startPoint = new window.BMapGL.Point(startPosition.lon, startPosition.lat);\n        endPoint = new window.BMapGL.Point(endPosotion.lon, endPosotion.lat);\n        let startMarker = new window.BMapGL.Marker(startPoint);\n        let endMarker = new window.BMapGL.Marker(endPoint);\n        map.addOverlay(startMarker);\n        map.addOverlay(endMarker);\n      } // 连接起始结束间路线\n\n\n      let trackPoints = positionList.map(item => {\n        let trackPoint = new window.BMapGL.Point(item.lon, item.lat);\n        return trackPoint;\n      });\n      var polyline = new window.BMapGL.Polyline(trackPoints, {\n        strokeColor: \"blue\",\n        strokeWeight: 2,\n        strokeOpacity: 0.5\n      });\n      map.addOverlay(polyline); // 将用户的终点作为地图的中心\n\n      this.map.centerAndZoom(endPoint, 11);\n    };\n\n    this.drawArea = areaList => {\n      if (areaList.length > 0) {\n        let areaPoints = areaList.map(item => {\n          return new window.BMapGL.Point(item.lon, item.lat);\n        });\n        var polygon = new window.BMapGL.Polygon(areaPoints, {\n          strokeColor: \"blue\",\n          strokeWeight: 2,\n          strokeOpacity: 0.5,\n          fillColor: '#ff8605'\n        });\n        this.map.addOverlay(polygon);\n      }\n    };\n  }\n\n  componentDidMount() {\n    let orderId = this.props.match.params.orderId;\n\n    if (orderId) {\n      this.getDetailInfo(orderId);\n    }\n  } // 获取订单详情\n\n\n  render() {\n    let info = this.state.orderInfo ? this.state.orderInfo : {};\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(_Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"orderDetailMap\",\n      style: {\n        height: 450\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-iterms\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"iterm-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 25\n      }\n    }, \"\\u57FA\\u7840\\u4FE1\\u606F\"), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"detail-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 33\n      }\n    }, \"\\u7528\\u8F66\\u6A21\\u5F0F\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 33\n      }\n    }, info.mode == 1 ? '服务区' : '停车点')), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 33\n      }\n    }, \"\\u8BA2\\u5355\\u7F16\\u53F7\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 33\n      }\n    }, info.orderSn)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 33\n      }\n    }, \"\\u8F66\\u8F86\\u7F16\\u53F7\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 33\n      }\n    }, info.bikeSn)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 33\n      }\n    }, \"\\u7528\\u6237\\u59D3\\u540D\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 33\n      }\n    }, info.userName)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 33\n      }\n    }, \"\\u624B\\u673A\\u53F7\\u7801\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 33\n      }\n    }, info.mobile)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-iterms\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"iterm-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 25\n      }\n    }, \"\\u884C\\u9A76\\u8F68\\u8FF9\"), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"detail-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 33\n      }\n    }, \"\\u884C\\u9A76\\u8D77\\u70B9\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 33\n      }\n    }, info.startLocation)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 33\n      }\n    }, \"\\u884C\\u9A76\\u7EC8\\u70B9\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 33\n      }\n    }, info.endLocation)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 33\n      }\n    }, \"\\u884C\\u9A76\\u91CC\\u7A0B\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail-form-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 33\n      }\n    }, info.distance / 1000, \"\\u516C\\u91CC\"))))));\n  }\n\n}","map":{"version":3,"sources":["/Users/xumeihong/Documents/code/git/react/demos/demo2/src/pages/order/detail.js"],"names":["React","Axios","Utils","FormItem","Item","Option","RadioGroup","Group","Detail","Component","state","getDetailInfo","orderId","ajax","url","data","param","then","res","setState","orderInfo","result","renderMap","map","window","BMapGL","Map","centerAndZoom","Point","addMapControl","drawBikeRoute","positionList","drawArea","areaList","addControl","ScaleControl","anchor","BMAP_ANCHOR_TOP_RIGHT","ZoomControl","startPoint","endPoint","length","startPosition","endPosotion","lon","lat","startMarker","Marker","endMarker","addOverlay","trackPoints","item","trackPoint","polyline","Polyline","strokeColor","strokeWeight","strokeOpacity","areaPoints","polygon","Polygon","fillColor","componentDidMount","props","match","params","render","info","height","mode","orderSn","bikeSn","userName","mobile","startLocation","endLocation","distance"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AAEA,MAAMC,QAAQ,GAAG,MAAKC,IAAtB;AACA,MAAMC,MAAM,GAAG,QAAOA,MAAtB;AACA,MAAMC,UAAU,GAAG,OAAMC,KAAzB;AAEA,eAAe,MAAMC,MAAN,SAAqBR,KAAK,CAACS,SAA3B,CAAqC;AAAA;AAAA;AAAA,SAChDC,KADgD,GACxC,EADwC;;AAAA,SAUhDC,aAVgD,GAU/BC,OAAD,IAAa;AACzBX,MAAAA,KAAK,CAACY,IAAN,CAAW;AACPC,QAAAA,GAAG,EAAE,eADE;AAEPC,QAAAA,IAAI,EAAE;AACFC,UAAAA,KAAK,EAAE;AACHJ,YAAAA,OAAO,EAAEA;AADN;AADL;AAFC,OAAX,EAOGK,IAPH,CAOQC,GAAG,IAAI;AACX,aAAKC,QAAL,CAAc;AACVC,UAAAA,SAAS,EAAEF,GAAG,CAACG;AADL,SAAd;AAGA,aAAKC,SAAL,CAAeJ,GAAG,CAACG,MAAnB;AACH,OAZD;AAaH,KAxB+C;;AAAA,SA2BhDC,SA3BgD,GA2BnCD,MAAD,IAAY;AACpB;AACA,WAAKE,GAAL,GAAW,IAAIC,MAAM,CAACC,MAAP,CAAcC,GAAlB,CAAsB,gBAAtB,CAAX,CAFoB,CAGpB;;AACA,WAAKH,GAAL,CAASI,aAAT,CAAuB,IAAIH,MAAM,CAACC,MAAP,CAAcG,KAAlB,CAAwB,OAAxB,EAAiC,MAAjC,CAAvB,EAAiE,EAAjE,EAJoB,CAKpB;;AACA,WAAKC,aAAL,GANoB,CAQpB;;AACA,WAAKC,aAAL,CAAmBT,MAAM,CAACU,YAA1B,EAToB,CAUpB;;AACA,WAAKC,QAAL,CAAcX,MAAM,CAACY,QAArB;AACH,KAvC+C;;AAAA,SA0ChDJ,aA1CgD,GA0ChC,MAAM;AAClB,UAAIN,GAAG,GAAG,KAAKA,GAAf;AACAA,MAAAA,GAAG,CAACW,UAAJ,CAAe,IAAIV,MAAM,CAACC,MAAP,CAAcU,YAAlB,CAA+B;AAAEC,QAAAA,MAAM,EAAEZ,MAAM,CAACC,MAAP,CAAcY;AAAxB,OAA/B,CAAf;AACAd,MAAAA,GAAG,CAACW,UAAJ,CAAe,IAAIV,MAAM,CAACC,MAAP,CAAca,WAAlB,CAA8B;AAAEF,QAAAA,MAAM,EAAEZ,MAAM,CAACC,MAAP,CAAcY;AAAxB,OAA9B,CAAf;AACH,KA9C+C;;AAAA,SAiDhDP,aAjDgD,GAiD/BC,YAAD,IAAkB;AAC9B;AACA,UAAIR,GAAG,GAAG,KAAKA,GAAf;AACA,UAAIgB,UAAU,GAAG,EAAjB;AACA,UAAIC,QAAQ,GAAG,EAAf;;AACA,UAAIT,YAAY,CAACU,MAAb,GAAsB,CAA1B,EAA6B;AACzB,YAAIC,aAAa,GAAGX,YAAY,CAAC,CAAD,CAAhC;AACA,YAAIY,WAAW,GAAGZ,YAAY,CAACA,YAAY,CAACU,MAAb,GAAsB,CAAvB,CAA9B;AACAF,QAAAA,UAAU,GAAG,IAAIf,MAAM,CAACC,MAAP,CAAcG,KAAlB,CAAwBc,aAAa,CAACE,GAAtC,EAA2CF,aAAa,CAACG,GAAzD,CAAb;AACAL,QAAAA,QAAQ,GAAG,IAAIhB,MAAM,CAACC,MAAP,CAAcG,KAAlB,CAAwBe,WAAW,CAACC,GAApC,EAAyCD,WAAW,CAACE,GAArD,CAAX;AACA,YAAIC,WAAW,GAAG,IAAItB,MAAM,CAACC,MAAP,CAAcsB,MAAlB,CAAyBR,UAAzB,CAAlB;AACA,YAAIS,SAAS,GAAG,IAAIxB,MAAM,CAACC,MAAP,CAAcsB,MAAlB,CAAyBP,QAAzB,CAAhB;AACAjB,QAAAA,GAAG,CAAC0B,UAAJ,CAAeH,WAAf;AACAvB,QAAAA,GAAG,CAAC0B,UAAJ,CAAeD,SAAf;AACH,OAd6B,CAgB9B;;;AACA,UAAIE,WAAW,GAAGnB,YAAY,CAACR,GAAb,CAAiB4B,IAAI,IAAI;AACvC,YAAIC,UAAU,GAAG,IAAI5B,MAAM,CAACC,MAAP,CAAcG,KAAlB,CAAwBuB,IAAI,CAACP,GAA7B,EAAkCO,IAAI,CAACN,GAAvC,CAAjB;AACA,eAAOO,UAAP;AACH,OAHiB,CAAlB;AAIA,UAAIC,QAAQ,GAAG,IAAI7B,MAAM,CAACC,MAAP,CAAc6B,QAAlB,CAA2BJ,WAA3B,EAAwC;AAAEK,QAAAA,WAAW,EAAE,MAAf;AAAuBC,QAAAA,YAAY,EAAE,CAArC;AAAwCC,QAAAA,aAAa,EAAE;AAAvD,OAAxC,CAAf;AACAlC,MAAAA,GAAG,CAAC0B,UAAJ,CAAeI,QAAf,EAtB8B,CAyB9B;;AACA,WAAK9B,GAAL,CAASI,aAAT,CAAuBa,QAAvB,EAAiC,EAAjC;AACH,KA5E+C;;AAAA,SA+EhDR,QA/EgD,GA+EpCC,QAAD,IAAc;AACrB,UAAIA,QAAQ,CAACQ,MAAT,GAAkB,CAAtB,EAAyB;AACrB,YAAIiB,UAAU,GAAGzB,QAAQ,CAACV,GAAT,CAAa4B,IAAI,IAAI;AAClC,iBAAO,IAAI3B,MAAM,CAACC,MAAP,CAAcG,KAAlB,CAAwBuB,IAAI,CAACP,GAA7B,EAAkCO,IAAI,CAACN,GAAvC,CAAP;AACH,SAFgB,CAAjB;AAGA,YAAIc,OAAO,GAAG,IAAInC,MAAM,CAACC,MAAP,CAAcmC,OAAlB,CAA0BF,UAA1B,EAAsC;AAChDH,UAAAA,WAAW,EAAE,MADmC;AAEhDC,UAAAA,YAAY,EAAE,CAFkC;AAGhDC,UAAAA,aAAa,EAAE,GAHiC;AAIhDI,UAAAA,SAAS,EAAE;AAJqC,SAAtC,CAAd;AAMA,aAAKtC,GAAL,CAAS0B,UAAT,CAAoBU,OAApB;AACH;AACJ,KA5F+C;AAAA;;AAEhDG,EAAAA,iBAAiB,GAAG;AAChB,QAAIlD,OAAO,GAAG,KAAKmD,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBrD,OAAtC;;AACA,QAAIA,OAAJ,EAAa;AACT,WAAKD,aAAL,CAAmBC,OAAnB;AACH;AACJ,GAP+C,CAShD;;;AAwFAsD,EAAAA,MAAM,GAAG;AACL,QAAIC,IAAI,GAAG,KAAKzD,KAAL,CAAWU,SAAX,GAAuB,KAAKV,KAAL,CAAWU,SAAlC,GAA8C,EAAzD;AAEA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,EAAE,EAAC,gBAAR;AAAyB,MAAA,KAAK,EAAE;AAAEgD,QAAAA,MAAM,EAAE;AAAV,OAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADJ,eAEI;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADJ,eAEI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsCD,IAAI,CAACE,IAAL,IAAa,CAAb,GAAiB,KAAjB,GAAyB,KAA/D,CAFJ,CADJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADJ,eAEI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsCF,IAAI,CAACG,OAA3C,CAFJ,CALJ,eASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADJ,eAEI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsCH,IAAI,CAACI,MAA3C,CAFJ,CATJ,eAaI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADJ,eAEI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsCJ,IAAI,CAACK,QAA3C,CAFJ,CAbJ,eAiBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADJ,eAEI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsCL,IAAI,CAACM,MAA3C,CAFJ,CAjBJ,CAFJ,CAFJ,eA2BI;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADJ,eAEI;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADJ,eAEI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsCN,IAAI,CAACO,aAA3C,CAFJ,CADJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADJ,eAEI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsCP,IAAI,CAACQ,WAA3C,CAFJ,CALJ,eASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADJ,eAEI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsCR,IAAI,CAACS,QAAL,GAAgB,IAAtD,iBAFJ,CATJ,CAFJ,CA3BJ,CADJ,CADJ;AAiDH;;AArJ+C","sourcesContent":["import React from 'react';\nimport { Form, Card, Button, Select, Table, Modal, Radio, message, DatePicker } from 'antd';\nimport Axios from '../../axios/index';\nimport Utils from '../../utils/utils';\n\nconst FormItem = Form.Item;\nconst Option = Select.Option;\nconst RadioGroup = Radio.Group;\n\nexport default class Detail extends React.Component {\n    state = {};\n    componentDidMount() {\n        let orderId = this.props.match.params.orderId;\n        if (orderId) {\n            this.getDetailInfo(orderId);\n        }\n    }\n\n    // 获取订单详情\n    getDetailInfo = (orderId) => {\n        Axios.ajax({\n            url: '/order/detail',\n            data: {\n                param: {\n                    orderId: orderId\n                }\n            }\n        }).then(res => {\n            this.setState({\n                orderInfo: res.result\n            });\n            this.renderMap(res.result);\n        });\n    }\n\n    // 渲染地图\n    renderMap = (result) => {\n        // 创建地图实例\n        this.map = new window.BMapGL.Map(\"orderDetailMap\");\n        // 初始化地图，设置中心点坐标(可以是坐标点对象，也可以是城市，具体参考方法)和地图缩放级别\n        this.map.centerAndZoom(new window.BMapGL.Point(116.404, 39.915), 11);\n        // 设置地图控件\n        this.addMapControl();\n\n        // 绘制用户的行驶路线\n        this.drawBikeRoute(result.positionList);\n        // 绘制可骑行区域\n        this.drawArea(result.areaList);\n    }\n\n    // 添加地图控件\n    addMapControl = () => {\n        let map = this.map;\n        map.addControl(new window.BMapGL.ScaleControl({ anchor: window.BMapGL.BMAP_ANCHOR_TOP_RIGHT }));\n        map.addControl(new window.BMapGL.ZoomControl({ anchor: window.BMapGL.BMAP_ANCHOR_TOP_RIGHT }));\n    }\n\n    // 绘制用户的行驶路线\n    drawBikeRoute = (positionList) => {\n        // 起始结束位置打点\n        let map = this.map;\n        let startPoint = '';\n        let endPoint = '';\n        if (positionList.length > 0) {\n            let startPosition = positionList[0]\n            let endPosotion = positionList[positionList.length - 1];\n            startPoint = new window.BMapGL.Point(startPosition.lon, startPosition.lat);\n            endPoint = new window.BMapGL.Point(endPosotion.lon, endPosotion.lat);\n            let startMarker = new window.BMapGL.Marker(startPoint);\n            let endMarker = new window.BMapGL.Marker(endPoint);\n            map.addOverlay(startMarker);\n            map.addOverlay(endMarker);\n        }\n\n        // 连接起始结束间路线\n        let trackPoints = positionList.map(item => {\n            let trackPoint = new window.BMapGL.Point(item.lon, item.lat);\n            return trackPoint;\n        })\n        var polyline = new window.BMapGL.Polyline(trackPoints, { strokeColor: \"blue\", strokeWeight: 2, strokeOpacity: 0.5 });\n        map.addOverlay(polyline);\n\n\n        // 将用户的终点作为地图的中心\n        this.map.centerAndZoom(endPoint, 11);\n    }\n\n    // 绘制可骑行区域\n    drawArea = (areaList) => {\n        if (areaList.length > 0) {\n            let areaPoints = areaList.map(item => {\n                return new window.BMapGL.Point(item.lon, item.lat);\n            });\n            var polygon = new window.BMapGL.Polygon(areaPoints, { \n                strokeColor: \"blue\", \n                strokeWeight: 2, \n                strokeOpacity: 0.5,\n                fillColor: '#ff8605'\n            });\n            this.map.addOverlay(polygon);\n        }\n    }\n\n\n\n\n    render() {\n        let info = this.state.orderInfo ? this.state.orderInfo : {};\n\n        return (\n            <div>\n                <Card>\n                    <div id=\"orderDetailMap\" style={{ height: 450 }}></div>\n                    <div className=\"detail-iterms\">\n                        <div className=\"iterm-title\">基础信息</div>\n                        <ul className=\"detail-form\">\n                            <li>\n                                <div className=\"detail-form-left\">用车模式</div>\n                                <div className=\"detail-form-content\">{info.mode == 1 ? '服务区' : '停车点'}</div>\n                            </li>\n                            <li>\n                                <div className=\"detail-form-left\">订单编号</div>\n                                <div className=\"detail-form-content\">{info.orderSn}</div>\n                            </li>\n                            <li>\n                                <div className=\"detail-form-left\">车辆编号</div>\n                                <div className=\"detail-form-content\">{info.bikeSn}</div>\n                            </li>\n                            <li>\n                                <div className=\"detail-form-left\">用户姓名</div>\n                                <div className=\"detail-form-content\">{info.userName}</div>\n                            </li>\n                            <li>\n                                <div className=\"detail-form-left\">手机号码</div>\n                                <div className=\"detail-form-content\">{info.mobile}</div>\n                            </li>\n                        </ul>\n                    </div>\n                    <div className=\"detail-iterms\">\n                        <div className=\"iterm-title\">行驶轨迹</div>\n                        <ul className=\"detail-form\">\n                            <li>\n                                <div className=\"detail-form-left\">行驶起点</div>\n                                <div className=\"detail-form-content\">{info.startLocation}</div>\n                            </li>\n                            <li>\n                                <div className=\"detail-form-left\">行驶终点</div>\n                                <div className=\"detail-form-content\">{info.endLocation}</div>\n                            </li>\n                            <li>\n                                <div className=\"detail-form-left\">行驶里程</div>\n                                <div className=\"detail-form-content\">{info.distance / 1000}公里</div>\n                            </li>\n                        </ul>\n                    </div>\n                </Card>\n            </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}