{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _omit = _interopRequireDefault(require(\"omit.js\"));\n\nvar _rcTable = _interopRequireWildcard(require(\"rc-table\"));\n\nvar PropTypes = _interopRequireWildcard(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _shallowequal = _interopRequireDefault(require(\"shallowequal\"));\n\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\n\nvar _filterDropdown = _interopRequireDefault(require(\"./filterDropdown\"));\n\nvar _createStore = _interopRequireDefault(require(\"./createStore\"));\n\nvar _SelectionBox = _interopRequireDefault(require(\"./SelectionBox\"));\n\nvar _SelectionCheckboxAll = _interopRequireDefault(require(\"./SelectionCheckboxAll\"));\n\nvar _Column = _interopRequireDefault(require(\"./Column\"));\n\nvar _ColumnGroup = _interopRequireDefault(require(\"./ColumnGroup\"));\n\nvar _createBodyRow = _interopRequireDefault(require(\"./createBodyRow\"));\n\nvar _util = require(\"./util\");\n\nvar _scrollTo = _interopRequireDefault(require(\"../_util/scrollTo\"));\n\nvar _pagination = _interopRequireDefault(require(\"../pagination\"));\n\nvar _icon = _interopRequireDefault(require(\"../icon\"));\n\nvar _spin = _interopRequireDefault(require(\"../spin\"));\n\nvar _transButton = _interopRequireDefault(require(\"../_util/transButton\"));\n\nvar _LocaleReceiver = _interopRequireDefault(require(\"../locale-provider/LocaleReceiver\"));\n\nvar _default2 = _interopRequireDefault(require(\"../locale/default\"));\n\nvar _configProvider = require(\"../config-provider\");\n\nvar _warning = _interopRequireDefault(require(\"../_util/warning\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar __rest = void 0 && (void 0).__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n/* eslint-disable prefer-spread */\n\n\nfunction noop() {}\n\nfunction stopPropagation(e) {\n  e.stopPropagation();\n}\n\nfunction getRowSelection(props) {\n  return props.rowSelection || {};\n}\n\nfunction getColumnKey(column, index) {\n  return column.key || column.dataIndex || index;\n}\n\nfunction isSameColumn(a, b) {\n  if (a && b && a.key && a.key === b.key) {\n    return true;\n  }\n\n  return a === b || (0, _shallowequal[\"default\"])(a, b, function (value, other) {\n    // https://github.com/ant-design/ant-design/issues/12737\n    if (typeof value === 'function' && typeof other === 'function') {\n      return value === other || value.toString() === other.toString();\n    } // https://github.com/ant-design/ant-design/issues/19398\n\n\n    if (Array.isArray(value) && Array.isArray(other)) {\n      return value === other || (0, _shallowequal[\"default\"])(value, other);\n    }\n  });\n}\n\nvar defaultPagination = {\n  onChange: noop,\n  onShowSizeChange: noop\n};\n/**\n * Avoid creating new object, so that parent component's shouldComponentUpdate\n * can works appropriately。\n */\n\nvar emptyObject = {};\n\nvar createComponents = function createComponents() {\n  var components = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var bodyRow = components && components.body && components.body.row;\n  return _extends(_extends({}, components), {\n    body: _extends(_extends({}, components.body), {\n      row: (0, _createBodyRow[\"default\"])(bodyRow)\n    })\n  });\n};\n\nfunction isTheSameComponents() {\n  var components1 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var components2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return components1 === components2 || ['table', 'header', 'body'].every(function (key) {\n    return (0, _shallowequal[\"default\"])(components1[key], components2[key]);\n  });\n}\n\nfunction getFilteredValueColumns(state, columns) {\n  return (0, _util.flatFilter)(columns || (state || {}).columns || [], function (column) {\n    return typeof column.filteredValue !== 'undefined';\n  });\n}\n\nfunction getFiltersFromColumns() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var columns = arguments.length > 1 ? arguments[1] : undefined;\n  var filters = {};\n  getFilteredValueColumns(state, columns).forEach(function (col) {\n    var colKey = getColumnKey(col);\n    filters[colKey] = col.filteredValue;\n  });\n  return filters;\n}\n\nfunction isFiltersChanged(state, filters) {\n  if (Object.keys(filters).length !== Object.keys(state.filters).length) {\n    return true;\n  }\n\n  return Object.keys(filters).some(function (columnKey) {\n    return filters[columnKey] !== state.filters[columnKey];\n  });\n}\n\nvar Table = /*#__PURE__*/function (_React$Component) {\n  _inherits(Table, _React$Component);\n\n  var _super = _createSuper(Table);\n\n  function Table(props) {\n    var _this;\n\n    _classCallCheck(this, Table);\n\n    _this = _super.call(this, props);\n\n    _this.setTableRef = function (table) {\n      _this.rcTable = table;\n    };\n\n    _this.getCheckboxPropsByItem = function (item, index) {\n      var rowSelection = getRowSelection(_this.props);\n\n      if (!rowSelection.getCheckboxProps) {\n        return {};\n      }\n\n      var key = _this.getRecordKey(item, index); // Cache checkboxProps\n\n\n      if (!_this.props.checkboxPropsCache[key]) {\n        _this.props.checkboxPropsCache[key] = rowSelection.getCheckboxProps(item) || {};\n        var checkboxProps = _this.props.checkboxPropsCache[key];\n        (0, _warning[\"default\"])(!('checked' in checkboxProps) && !('defaultChecked' in checkboxProps), 'Table', 'Do not set `checked` or `defaultChecked` in `getCheckboxProps`. Please use `selectedRowKeys` instead.');\n      }\n\n      return _this.props.checkboxPropsCache[key];\n    };\n\n    _this.getRecordKey = function (record, index) {\n      var rowKey = _this.props.rowKey;\n      var recordKey = typeof rowKey === 'function' ? rowKey(record, index) : record[rowKey];\n      (0, _warning[\"default\"])(recordKey !== undefined, 'Table', 'Each record in dataSource of table should have a unique `key` prop, ' + 'or set `rowKey` of Table to an unique primary key, ' + 'see https://u.ant.design/table-row-key');\n      return recordKey === undefined ? index : recordKey;\n    };\n\n    _this.onRow = function (prefixCls, record, index) {\n      var onRow = _this.props.onRow;\n      var custom = onRow ? onRow(record, index) : {};\n      return _extends(_extends({}, custom), {\n        prefixCls: prefixCls,\n        store: _this.props.store,\n        rowKey: _this.getRecordKey(record, index)\n      });\n    };\n\n    _this.generatePopupContainerFunc = function (getPopupContainer) {\n      var scroll = _this.props.scroll;\n      var table = _this.rcTable;\n\n      if (getPopupContainer) {\n        return getPopupContainer;\n      } // Use undefined to let rc component use default logic.\n\n\n      return scroll && table ? function () {\n        return table.tableNode;\n      } : undefined;\n    };\n\n    _this.scrollToFirstRow = function () {\n      var scroll = _this.props.scroll;\n\n      if (scroll && scroll.scrollToFirstRowOnChange !== false) {\n        (0, _scrollTo[\"default\"])(0, {\n          getContainer: function getContainer() {\n            return _this.rcTable.bodyTable;\n          }\n        });\n      }\n    };\n\n    _this.handleFilter = function (column, nextFilters) {\n      var props = _this.props;\n\n      var pagination = _extends({}, _this.state.pagination);\n\n      var filters = _extends(_extends({}, _this.state.filters), _defineProperty({}, getColumnKey(column), nextFilters)); // Remove filters not in current columns\n\n\n      var currentColumnKeys = [];\n      (0, _util.treeMap)(_this.state.columns, function (c) {\n        if (!c.children) {\n          currentColumnKeys.push(getColumnKey(c));\n        }\n      });\n      Object.keys(filters).forEach(function (columnKey) {\n        if (currentColumnKeys.indexOf(columnKey) < 0) {\n          delete filters[columnKey];\n        }\n      });\n\n      if (props.pagination) {\n        // Reset current prop\n        pagination.current = 1;\n        pagination.onChange(pagination.current);\n      }\n\n      var newState = {\n        pagination: pagination,\n        filters: {}\n      };\n\n      var filtersToSetState = _extends({}, filters); // Remove filters which is controlled\n\n\n      getFilteredValueColumns(_this.state).forEach(function (col) {\n        var columnKey = getColumnKey(col);\n\n        if (columnKey) {\n          delete filtersToSetState[columnKey];\n        }\n      });\n\n      if (Object.keys(filtersToSetState).length > 0) {\n        newState.filters = filtersToSetState;\n      } // Controlled current prop will not respond user interaction\n\n\n      if (_typeof(props.pagination) === 'object' && 'current' in props.pagination) {\n        newState.pagination = _extends(_extends({}, pagination), {\n          current: _this.state.pagination.current\n        });\n      }\n\n      _this.setState(newState, function () {\n        _this.scrollToFirstRow();\n\n        _this.props.store.setState({\n          selectionDirty: false\n        });\n\n        var onChange = _this.props.onChange;\n\n        if (onChange) {\n          onChange.apply(null, _this.prepareParamsArguments(_extends(_extends({}, _this.state), {\n            selectionDirty: false,\n            filters: filters,\n            pagination: pagination\n          })));\n        }\n      });\n    };\n\n    _this.handleSelect = function (record, rowIndex, e) {\n      var checked = e.target.checked;\n      var nativeEvent = e.nativeEvent;\n      var defaultSelection = _this.props.store.getState().selectionDirty ? [] : _this.getDefaultSelection();\n\n      var selectedRowKeys = _this.props.store.getState().selectedRowKeys.concat(defaultSelection);\n\n      var key = _this.getRecordKey(record, rowIndex);\n\n      var pivot = _this.state.pivot;\n\n      var rows = _this.getFlatCurrentPageData();\n\n      var realIndex = rowIndex;\n\n      if (_this.props.expandedRowRender) {\n        realIndex = rows.findIndex(function (row) {\n          return _this.getRecordKey(row, rowIndex) === key;\n        });\n      }\n\n      if (nativeEvent.shiftKey && pivot !== undefined && realIndex !== pivot) {\n        var changeRowKeys = [];\n        var direction = Math.sign(pivot - realIndex);\n        var dist = Math.abs(pivot - realIndex);\n        var step = 0;\n\n        var _loop = function _loop() {\n          var i = realIndex + step * direction;\n          step += 1;\n          var row = rows[i];\n\n          var rowKey = _this.getRecordKey(row, i);\n\n          var checkboxProps = _this.getCheckboxPropsByItem(row, i);\n\n          if (!checkboxProps.disabled) {\n            if (selectedRowKeys.includes(rowKey)) {\n              if (!checked) {\n                selectedRowKeys = selectedRowKeys.filter(function (j) {\n                  return rowKey !== j;\n                });\n                changeRowKeys.push(rowKey);\n              }\n            } else if (checked) {\n              selectedRowKeys.push(rowKey);\n              changeRowKeys.push(rowKey);\n            }\n          }\n        };\n\n        while (step <= dist) {\n          _loop();\n        }\n\n        _this.setState({\n          pivot: realIndex\n        });\n\n        _this.props.store.setState({\n          selectionDirty: true\n        });\n\n        _this.setSelectedRowKeys(selectedRowKeys, {\n          selectWay: 'onSelectMultiple',\n          record: record,\n          checked: checked,\n          changeRowKeys: changeRowKeys,\n          nativeEvent: nativeEvent\n        });\n      } else {\n        if (checked) {\n          selectedRowKeys.push(_this.getRecordKey(record, realIndex));\n        } else {\n          selectedRowKeys = selectedRowKeys.filter(function (i) {\n            return key !== i;\n          });\n        }\n\n        _this.setState({\n          pivot: realIndex\n        });\n\n        _this.props.store.setState({\n          selectionDirty: true\n        });\n\n        _this.setSelectedRowKeys(selectedRowKeys, {\n          selectWay: 'onSelect',\n          record: record,\n          checked: checked,\n          changeRowKeys: undefined,\n          nativeEvent: nativeEvent\n        });\n      }\n    };\n\n    _this.handleRadioSelect = function (record, rowIndex, e) {\n      var checked = e.target.checked;\n      var nativeEvent = e.nativeEvent;\n\n      var key = _this.getRecordKey(record, rowIndex);\n\n      var selectedRowKeys = [key];\n\n      _this.props.store.setState({\n        selectionDirty: true\n      });\n\n      _this.setSelectedRowKeys(selectedRowKeys, {\n        selectWay: 'onSelect',\n        record: record,\n        checked: checked,\n        changeRowKeys: undefined,\n        nativeEvent: nativeEvent\n      });\n    };\n\n    _this.handleSelectRow = function (selectionKey, index, onSelectFunc) {\n      var data = _this.getFlatCurrentPageData();\n\n      var defaultSelection = _this.props.store.getState().selectionDirty ? [] : _this.getDefaultSelection();\n\n      var selectedRowKeys = _this.props.store.getState().selectedRowKeys.concat(defaultSelection);\n\n      var changeableRowKeys = data.filter(function (item, i) {\n        return !_this.getCheckboxPropsByItem(item, i).disabled;\n      }).map(function (item, i) {\n        return _this.getRecordKey(item, i);\n      });\n      var changeRowKeys = [];\n      var selectWay = 'onSelectAll';\n      var checked; // handle default selection\n\n      switch (selectionKey) {\n        case 'all':\n          changeableRowKeys.forEach(function (key) {\n            if (selectedRowKeys.indexOf(key) < 0) {\n              selectedRowKeys.push(key);\n              changeRowKeys.push(key);\n            }\n          });\n          selectWay = 'onSelectAll';\n          checked = true;\n          break;\n\n        case 'removeAll':\n          changeableRowKeys.forEach(function (key) {\n            if (selectedRowKeys.indexOf(key) >= 0) {\n              selectedRowKeys.splice(selectedRowKeys.indexOf(key), 1);\n              changeRowKeys.push(key);\n            }\n          });\n          selectWay = 'onSelectAll';\n          checked = false;\n          break;\n\n        case 'invert':\n          changeableRowKeys.forEach(function (key) {\n            if (selectedRowKeys.indexOf(key) < 0) {\n              selectedRowKeys.push(key);\n            } else {\n              selectedRowKeys.splice(selectedRowKeys.indexOf(key), 1);\n            }\n\n            changeRowKeys.push(key);\n            selectWay = 'onSelectInvert';\n          });\n          break;\n\n        default:\n          break;\n      }\n\n      _this.props.store.setState({\n        selectionDirty: true\n      }); // when select custom selection, callback selections[n].onSelect\n\n\n      var rowSelection = _this.props.rowSelection;\n      var customSelectionStartIndex = 2;\n\n      if (rowSelection && rowSelection.hideDefaultSelections) {\n        customSelectionStartIndex = 0;\n      }\n\n      if (index >= customSelectionStartIndex && typeof onSelectFunc === 'function') {\n        return onSelectFunc(changeableRowKeys);\n      }\n\n      _this.setSelectedRowKeys(selectedRowKeys, {\n        selectWay: selectWay,\n        checked: checked,\n        changeRowKeys: changeRowKeys\n      });\n    };\n\n    _this.handlePageChange = function (current) {\n      var props = _this.props;\n\n      var pagination = _extends({}, _this.state.pagination);\n\n      if (current) {\n        pagination.current = current;\n      } else {\n        pagination.current = pagination.current || 1;\n      }\n\n      for (var _len = arguments.length, otherArguments = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        otherArguments[_key - 1] = arguments[_key];\n      }\n\n      pagination.onChange.apply(pagination, [pagination.current].concat(otherArguments));\n      var newState = {\n        pagination: pagination\n      }; // Controlled current prop will not respond user interaction\n\n      if (props.pagination && _typeof(props.pagination) === 'object' && 'current' in props.pagination) {\n        newState.pagination = _extends(_extends({}, pagination), {\n          current: _this.state.pagination.current\n        });\n      }\n\n      _this.setState(newState, _this.scrollToFirstRow);\n\n      _this.props.store.setState({\n        selectionDirty: false\n      });\n\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        onChange.apply(null, _this.prepareParamsArguments(_extends(_extends({}, _this.state), {\n          selectionDirty: false,\n          pagination: pagination\n        })));\n      }\n    };\n\n    _this.handleShowSizeChange = function (current, pageSize) {\n      var pagination = _this.state.pagination;\n      pagination.onShowSizeChange(current, pageSize);\n\n      var nextPagination = _extends(_extends({}, pagination), {\n        pageSize: pageSize,\n        current: current\n      });\n\n      _this.setState({\n        pagination: nextPagination\n      }, _this.scrollToFirstRow);\n\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        onChange.apply(null, _this.prepareParamsArguments(_extends(_extends({}, _this.state), {\n          pagination: nextPagination\n        })));\n      }\n    };\n\n    _this.renderExpandIcon = function (prefixCls) {\n      return function (_ref) {\n        var expandable = _ref.expandable,\n            expanded = _ref.expanded,\n            needIndentSpaced = _ref.needIndentSpaced,\n            record = _ref.record,\n            onExpand = _ref.onExpand;\n\n        if (expandable) {\n          return /*#__PURE__*/React.createElement(_LocaleReceiver[\"default\"], {\n            componentName: \"Table\",\n            defaultLocale: _default2[\"default\"].Table\n          }, function (locale) {\n            var _classNames;\n\n            return /*#__PURE__*/React.createElement(_transButton[\"default\"], {\n              className: (0, _classnames[\"default\"])(\"\".concat(prefixCls, \"-row-expand-icon\"), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-row-collapsed\"), !expanded), _defineProperty(_classNames, \"\".concat(prefixCls, \"-row-expanded\"), expanded), _classNames)),\n              onClick: function onClick(event) {\n                onExpand(record, event);\n              },\n              \"aria-label\": expanded ? locale.collapse : locale.expand,\n              noStyle: true\n            });\n          });\n        }\n\n        if (needIndentSpaced) {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            className: \"\".concat(prefixCls, \"-row-expand-icon \").concat(prefixCls, \"-row-spaced\")\n          });\n        }\n\n        return null;\n      };\n    };\n\n    _this.renderSelectionBox = function (type) {\n      return function (_, record, index) {\n        var rowKey = _this.getRecordKey(record, index);\n\n        var props = _this.getCheckboxPropsByItem(record, index);\n\n        var handleChange = function handleChange(e) {\n          return type === 'radio' ? _this.handleRadioSelect(record, index, e) : _this.handleSelect(record, index, e);\n        };\n\n        return /*#__PURE__*/React.createElement(\"span\", {\n          onClick: stopPropagation\n        }, /*#__PURE__*/React.createElement(_SelectionBox[\"default\"], _extends({\n          type: type,\n          store: _this.props.store,\n          rowIndex: rowKey,\n          onChange: handleChange,\n          defaultSelection: _this.getDefaultSelection()\n        }, props)));\n      };\n    };\n\n    _this.renderTable = function (_ref2) {\n      var _classNames2;\n\n      var prefixCls = _ref2.prefixCls,\n          renderEmpty = _ref2.renderEmpty,\n          dropdownPrefixCls = _ref2.dropdownPrefixCls,\n          contextLocale = _ref2.contextLocale,\n          contextGetPopupContainer = _ref2.getPopupContainer;\n\n      var _a = _this.props,\n          showHeader = _a.showHeader,\n          locale = _a.locale,\n          getPopupContainer = _a.getPopupContainer,\n          restTableProps = __rest(_a, [\"showHeader\", \"locale\", \"getPopupContainer\"]); // do not pass prop.style to rc-table, since already apply it to container div\n\n\n      var restProps = (0, _omit[\"default\"])(restTableProps, ['style']);\n\n      var data = _this.getCurrentPageData();\n\n      var expandIconAsCell = _this.props.expandedRowRender && _this.props.expandIconAsCell !== false; // use props.getPopupContainer first\n\n      var realGetPopupContainer = getPopupContainer || contextGetPopupContainer; // Merge too locales\n\n      var mergedLocale = _extends(_extends({}, contextLocale), locale);\n\n      if (!locale || !locale.emptyText) {\n        mergedLocale.emptyText = renderEmpty('Table');\n      }\n\n      var classString = (0, _classnames[\"default\"])(\"\".concat(prefixCls, \"-\").concat(_this.props.size), (_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(prefixCls, \"-bordered\"), _this.props.bordered), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-empty\"), !data.length), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-without-column-header\"), !showHeader), _classNames2));\n\n      var columnsWithRowSelection = _this.renderRowSelection({\n        prefixCls: prefixCls,\n        locale: mergedLocale,\n        getPopupContainer: realGetPopupContainer\n      });\n\n      var columns = _this.renderColumnsDropdown({\n        columns: columnsWithRowSelection,\n        prefixCls: prefixCls,\n        dropdownPrefixCls: dropdownPrefixCls,\n        locale: mergedLocale,\n        getPopupContainer: realGetPopupContainer\n      }).map(function (column, i) {\n        var newColumn = _extends({}, column);\n\n        newColumn.key = getColumnKey(newColumn, i);\n        return newColumn;\n      });\n\n      var expandIconColumnIndex = columns[0] && columns[0].key === 'selection-column' ? 1 : 0;\n\n      if ('expandIconColumnIndex' in restProps) {\n        expandIconColumnIndex = restProps.expandIconColumnIndex;\n      }\n\n      return /*#__PURE__*/React.createElement(_rcTable[\"default\"], _extends({\n        ref: _this.setTableRef,\n        key: \"table\",\n        expandIcon: _this.renderExpandIcon(prefixCls)\n      }, restProps, {\n        onRow: function onRow(record, index) {\n          return _this.onRow(prefixCls, record, index);\n        },\n        components: _this.state.components,\n        prefixCls: prefixCls,\n        data: data,\n        columns: columns,\n        showHeader: showHeader,\n        className: classString,\n        expandIconColumnIndex: expandIconColumnIndex,\n        expandIconAsCell: expandIconAsCell,\n        emptyText: mergedLocale.emptyText\n      }));\n    };\n\n    _this.renderComponent = function (_ref3) {\n      var getPrefixCls = _ref3.getPrefixCls,\n          renderEmpty = _ref3.renderEmpty,\n          getPopupContainer = _ref3.getPopupContainer;\n      var _this$props = _this.props,\n          customizePrefixCls = _this$props.prefixCls,\n          customizeDropdownPrefixCls = _this$props.dropdownPrefixCls,\n          style = _this$props.style,\n          className = _this$props.className;\n\n      var data = _this.getCurrentPageData();\n\n      var loading = _this.props.loading;\n\n      if (typeof loading === 'boolean') {\n        loading = {\n          spinning: loading\n        };\n      }\n\n      var prefixCls = getPrefixCls('table', customizePrefixCls);\n      var dropdownPrefixCls = getPrefixCls('dropdown', customizeDropdownPrefixCls);\n      var table = /*#__PURE__*/React.createElement(_LocaleReceiver[\"default\"], {\n        componentName: \"Table\",\n        defaultLocale: _default2[\"default\"].Table\n      }, function (locale) {\n        return _this.renderTable({\n          prefixCls: prefixCls,\n          renderEmpty: renderEmpty,\n          dropdownPrefixCls: dropdownPrefixCls,\n          contextLocale: locale,\n          getPopupContainer: getPopupContainer\n        });\n      }); // if there is no pagination or no data,\n      // the height of spin should decrease by half of pagination\n\n      var paginationPatchClass = _this.hasPagination() && data && data.length !== 0 ? \"\".concat(prefixCls, \"-with-pagination\") : \"\".concat(prefixCls, \"-without-pagination\");\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: (0, _classnames[\"default\"])(\"\".concat(prefixCls, \"-wrapper\"), className),\n        style: style\n      }, /*#__PURE__*/React.createElement(_spin[\"default\"], _extends({}, loading, {\n        className: loading.spinning ? \"\".concat(paginationPatchClass, \" \").concat(prefixCls, \"-spin-holder\") : ''\n      }), _this.renderPagination(prefixCls, 'top'), table, _this.renderPagination(prefixCls, 'bottom')));\n    };\n\n    var expandedRowRender = props.expandedRowRender,\n        columnsProp = props.columns;\n    (0, _warning[\"default\"])(!('columnsPageRange' in props || 'columnsPageSize' in props), 'Table', '`columnsPageRange` and `columnsPageSize` are removed, please use ' + 'fixed columns instead, see: https://u.ant.design/fixed-columns.');\n\n    if (expandedRowRender && (columnsProp || []).some(function (_ref4) {\n      var fixed = _ref4.fixed;\n      return !!fixed;\n    })) {\n      (0, _warning[\"default\"])(false, 'Table', '`expandedRowRender` and `Column.fixed` are not compatible. Please use one of them at one time.');\n    }\n\n    var columns = columnsProp || (0, _util.normalizeColumns)(props.children);\n    _this.state = _extends(_extends({}, _this.getDefaultSortOrder(columns || [])), {\n      // 减少状态\n      filters: _this.getDefaultFilters(columns),\n      pagination: _this.getDefaultPagination(props),\n      pivot: undefined,\n      prevProps: props,\n      components: createComponents(props.components),\n      columns: columns\n    });\n    return _this;\n  }\n\n  _createClass(Table, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this$state = this.state,\n          columns = _this$state.columns,\n          sortColumn = _this$state.sortColumn,\n          sortOrder = _this$state.sortOrder;\n\n      if (this.getSortOrderColumns(columns).length > 0) {\n        var sortState = this.getSortStateFromColumns(columns);\n\n        if (!isSameColumn(sortState.sortColumn, sortColumn) || sortState.sortOrder !== sortOrder) {\n          this.setState(sortState);\n        }\n      }\n    }\n  }, {\n    key: \"getDefaultSelection\",\n    value: function getDefaultSelection() {\n      var _this2 = this;\n\n      var rowSelection = getRowSelection(this.props);\n\n      if (!rowSelection.getCheckboxProps) {\n        return [];\n      }\n\n      return this.getFlatData().filter(function (item, rowIndex) {\n        return _this2.getCheckboxPropsByItem(item, rowIndex).defaultChecked;\n      }).map(function (record, rowIndex) {\n        return _this2.getRecordKey(record, rowIndex);\n      });\n    }\n  }, {\n    key: \"getDefaultPagination\",\n    value: function getDefaultPagination(props) {\n      var pagination = _typeof(props.pagination) === 'object' ? props.pagination : {};\n      var current;\n\n      if ('current' in pagination) {\n        current = pagination.current;\n      } else if ('defaultCurrent' in pagination) {\n        current = pagination.defaultCurrent;\n      }\n\n      var pageSize;\n\n      if ('pageSize' in pagination) {\n        pageSize = pagination.pageSize;\n      } else if ('defaultPageSize' in pagination) {\n        pageSize = pagination.defaultPageSize;\n      }\n\n      return this.hasPagination(props) ? _extends(_extends(_extends({}, defaultPagination), pagination), {\n        current: current || 1,\n        pageSize: pageSize || 10\n      }) : {};\n    }\n  }, {\n    key: \"getSortOrderColumns\",\n    value: function getSortOrderColumns(columns) {\n      return (0, _util.flatFilter)(columns || (this.state || {}).columns || [], function (column) {\n        return 'sortOrder' in column;\n      });\n    }\n  }, {\n    key: \"getDefaultFilters\",\n    value: function getDefaultFilters(columns) {\n      var definedFilters = getFiltersFromColumns(this.state, columns);\n      var defaultFilteredValueColumns = (0, _util.flatFilter)(columns || [], function (column) {\n        return typeof column.defaultFilteredValue !== 'undefined';\n      });\n      var defaultFilters = defaultFilteredValueColumns.reduce(function (soFar, col) {\n        var colKey = getColumnKey(col);\n        soFar[colKey] = col.defaultFilteredValue;\n        return soFar;\n      }, {});\n      return _extends(_extends({}, defaultFilters), definedFilters);\n    }\n  }, {\n    key: \"getDefaultSortOrder\",\n    value: function getDefaultSortOrder(columns) {\n      var definedSortState = this.getSortStateFromColumns(columns);\n      var defaultSortedColumn = (0, _util.flatFilter)(columns || [], function (column) {\n        return column.defaultSortOrder != null;\n      })[0];\n\n      if (defaultSortedColumn && !definedSortState.sortColumn) {\n        return {\n          sortColumn: defaultSortedColumn,\n          sortOrder: defaultSortedColumn.defaultSortOrder\n        };\n      }\n\n      return definedSortState;\n    }\n  }, {\n    key: \"getSortStateFromColumns\",\n    value: function getSortStateFromColumns(columns) {\n      // return first column which sortOrder is not falsy\n      var sortedColumn = this.getSortOrderColumns(columns).filter(function (col) {\n        return col.sortOrder;\n      })[0];\n\n      if (sortedColumn) {\n        return {\n          sortColumn: sortedColumn,\n          sortOrder: sortedColumn.sortOrder\n        };\n      }\n\n      return {\n        sortColumn: null,\n        sortOrder: null\n      };\n    }\n  }, {\n    key: \"getMaxCurrent\",\n    value: function getMaxCurrent(total) {\n      var _this$state$paginatio = this.state.pagination,\n          current = _this$state$paginatio.current,\n          pageSize = _this$state$paginatio.pageSize;\n\n      if ((current - 1) * pageSize >= total) {\n        return Math.floor((total - 1) / pageSize) + 1;\n      }\n\n      return current;\n    }\n  }, {\n    key: \"getSorterFn\",\n    value: function getSorterFn(state) {\n      var _ref5 = state || this.state,\n          sortOrder = _ref5.sortOrder,\n          sortColumn = _ref5.sortColumn;\n\n      if (!sortOrder || !sortColumn || typeof sortColumn.sorter !== 'function') {\n        return;\n      }\n\n      return function (a, b) {\n        var result = sortColumn.sorter(a, b, sortOrder);\n\n        if (result !== 0) {\n          return sortOrder === 'descend' ? -result : result;\n        }\n\n        return 0;\n      };\n    }\n  }, {\n    key: \"getCurrentPageData\",\n    value: function getCurrentPageData() {\n      var data = this.getLocalData();\n      var current;\n      var pageSize;\n      var state = this.state; // 如果没有分页的话，默认全部展示\n\n      if (!this.hasPagination()) {\n        pageSize = Number.MAX_VALUE;\n        current = 1;\n      } else {\n        pageSize = state.pagination.pageSize;\n        current = this.getMaxCurrent(state.pagination.total || data.length);\n      } // 分页\n      // ---\n      // 当数据量少于等于每页数量时，直接设置数据\n      // 否则进行读取分页数据\n\n\n      if (data.length > pageSize || pageSize === Number.MAX_VALUE) {\n        data = data.slice((current - 1) * pageSize, current * pageSize);\n      }\n\n      return data;\n    }\n  }, {\n    key: \"getFlatData\",\n    value: function getFlatData() {\n      var childrenColumnName = this.props.childrenColumnName;\n      return (0, _util.flatArray)(this.getLocalData(null, false), childrenColumnName);\n    }\n  }, {\n    key: \"getFlatCurrentPageData\",\n    value: function getFlatCurrentPageData() {\n      var childrenColumnName = this.props.childrenColumnName;\n      return (0, _util.flatArray)(this.getCurrentPageData(), childrenColumnName);\n    }\n  }, {\n    key: \"getLocalData\",\n    value: function getLocalData(state) {\n      var _this3 = this;\n\n      var filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var currentState = state || this.state;\n      var dataSource = this.props.dataSource;\n      var data = dataSource || []; // 优化本地排序\n\n      data = data.slice(0);\n      var sorterFn = this.getSorterFn(currentState);\n\n      if (sorterFn) {\n        data = this.recursiveSort(data, sorterFn);\n      } // 筛选\n\n\n      if (filter && currentState.filters) {\n        Object.keys(currentState.filters).forEach(function (columnKey) {\n          var col = _this3.findColumn(columnKey);\n\n          if (!col) {\n            return;\n          }\n\n          var values = currentState.filters[columnKey] || [];\n\n          if (values.length === 0) {\n            return;\n          }\n\n          var onFilter = col.onFilter;\n          data = onFilter ? data.filter(function (record) {\n            return values.some(function (v) {\n              return onFilter(v, record);\n            });\n          }) : data;\n        });\n      }\n\n      return data;\n    }\n  }, {\n    key: \"setSelectedRowKeys\",\n    value: function setSelectedRowKeys(selectedRowKeys, selectionInfo) {\n      var _this4 = this;\n\n      var selectWay = selectionInfo.selectWay,\n          record = selectionInfo.record,\n          checked = selectionInfo.checked,\n          changeRowKeys = selectionInfo.changeRowKeys,\n          nativeEvent = selectionInfo.nativeEvent;\n      var rowSelection = getRowSelection(this.props);\n\n      if (rowSelection && !('selectedRowKeys' in rowSelection)) {\n        this.props.store.setState({\n          selectedRowKeys: selectedRowKeys\n        });\n      }\n\n      var data = this.getFlatData();\n\n      if (!rowSelection.onChange && !rowSelection[selectWay]) {\n        return;\n      }\n\n      var selectedRows = data.filter(function (row, i) {\n        return selectedRowKeys.indexOf(_this4.getRecordKey(row, i)) >= 0;\n      });\n\n      if (rowSelection.onChange) {\n        rowSelection.onChange(selectedRowKeys, selectedRows);\n      }\n\n      if (selectWay === 'onSelect' && rowSelection.onSelect) {\n        rowSelection.onSelect(record, checked, selectedRows, nativeEvent);\n      } else if (selectWay === 'onSelectMultiple' && rowSelection.onSelectMultiple) {\n        var changeRows = data.filter(function (row, i) {\n          return changeRowKeys.indexOf(_this4.getRecordKey(row, i)) >= 0;\n        });\n        rowSelection.onSelectMultiple(checked, selectedRows, changeRows);\n      } else if (selectWay === 'onSelectAll' && rowSelection.onSelectAll) {\n        var _changeRows = data.filter(function (row, i) {\n          return changeRowKeys.indexOf(_this4.getRecordKey(row, i)) >= 0;\n        });\n\n        rowSelection.onSelectAll(checked, selectedRows, _changeRows);\n      } else if (selectWay === 'onSelectInvert' && rowSelection.onSelectInvert) {\n        rowSelection.onSelectInvert(selectedRowKeys);\n      }\n    }\n  }, {\n    key: \"toggleSortOrder\",\n    value: function toggleSortOrder(column) {\n      var sortDirections = column.sortDirections || this.props.sortDirections;\n      var _this$state2 = this.state,\n          sortOrder = _this$state2.sortOrder,\n          sortColumn = _this$state2.sortColumn; // 只同时允许一列进行排序，否则会导致排序顺序的逻辑问题\n\n      var newSortOrder; // 切换另一列时，丢弃 sortOrder 的状态\n\n      if (isSameColumn(sortColumn, column) && sortOrder !== undefined) {\n        // 按照sortDirections的内容依次切换排序状态\n        var methodIndex = sortDirections.indexOf(sortOrder) + 1;\n        newSortOrder = methodIndex === sortDirections.length ? undefined : sortDirections[methodIndex];\n      } else {\n        newSortOrder = sortDirections[0];\n      }\n\n      var newState = {\n        sortOrder: newSortOrder,\n        sortColumn: newSortOrder ? column : null\n      }; // Controlled\n\n      if (this.getSortOrderColumns().length === 0) {\n        this.setState(newState, this.scrollToFirstRow);\n      }\n\n      var onChange = this.props.onChange;\n\n      if (onChange) {\n        onChange.apply(null, this.prepareParamsArguments(_extends(_extends({}, this.state), newState), column));\n      }\n    }\n  }, {\n    key: \"hasPagination\",\n    value: function hasPagination(props) {\n      return (props || this.props).pagination !== false;\n    }\n  }, {\n    key: \"isSortColumn\",\n    value: function isSortColumn(column) {\n      var sortColumn = this.state.sortColumn;\n\n      if (!column || !sortColumn) {\n        return false;\n      }\n\n      return getColumnKey(sortColumn) === getColumnKey(column);\n    } // Get pagination, filters, sorter\n\n  }, {\n    key: \"prepareParamsArguments\",\n    value: function prepareParamsArguments(state, column) {\n      var pagination = _extends({}, state.pagination); // remove useless handle function in Table.onChange\n\n\n      delete pagination.onChange;\n      delete pagination.onShowSizeChange;\n      var filters = state.filters;\n      var sorter = {};\n      var currentColumn = column;\n\n      if (state.sortColumn && state.sortOrder) {\n        currentColumn = state.sortColumn;\n        sorter.column = state.sortColumn;\n        sorter.order = state.sortOrder;\n      }\n\n      if (currentColumn) {\n        sorter.field = currentColumn.dataIndex;\n        sorter.columnKey = getColumnKey(currentColumn);\n      }\n\n      var extra = {\n        currentDataSource: this.getLocalData(state)\n      };\n      return [pagination, filters, sorter, extra];\n    }\n  }, {\n    key: \"findColumn\",\n    value: function findColumn(myKey) {\n      var column;\n      (0, _util.treeMap)(this.state.columns, function (c) {\n        if (getColumnKey(c) === myKey) {\n          column = c;\n        }\n      });\n      return column;\n    }\n  }, {\n    key: \"recursiveSort\",\n    value: function recursiveSort(data, sorterFn) {\n      var _this5 = this;\n\n      var _this$props$childrenC = this.props.childrenColumnName,\n          childrenColumnName = _this$props$childrenC === void 0 ? 'children' : _this$props$childrenC;\n      return data.sort(sorterFn).map(function (item) {\n        return item[childrenColumnName] ? _extends(_extends({}, item), _defineProperty({}, childrenColumnName, _this5.recursiveSort(item[childrenColumnName], sorterFn))) : item;\n      });\n    }\n  }, {\n    key: \"renderPagination\",\n    value: function renderPagination(prefixCls, paginationPosition) {\n      // 强制不需要分页\n      if (!this.hasPagination()) {\n        return null;\n      }\n\n      var size = 'default';\n      var pagination = this.state.pagination;\n\n      if (pagination.size) {\n        size = pagination.size;\n      } else if (this.props.size === 'middle' || this.props.size === 'small') {\n        size = 'small';\n      }\n\n      var position = pagination.position || 'bottom';\n      var total = pagination.total || this.getLocalData().length;\n      return total > 0 && (position === paginationPosition || position === 'both') ? /*#__PURE__*/React.createElement(_pagination[\"default\"], _extends({\n        key: \"pagination-\".concat(paginationPosition)\n      }, pagination, {\n        className: (0, _classnames[\"default\"])(pagination.className, \"\".concat(prefixCls, \"-pagination\")),\n        onChange: this.handlePageChange,\n        total: total,\n        size: size,\n        current: this.getMaxCurrent(total),\n        onShowSizeChange: this.handleShowSizeChange\n      })) : null;\n    }\n  }, {\n    key: \"renderRowSelection\",\n    value: function renderRowSelection(_ref6) {\n      var _this6 = this;\n\n      var prefixCls = _ref6.prefixCls,\n          locale = _ref6.locale,\n          getPopupContainer = _ref6.getPopupContainer;\n      var rowSelection = this.props.rowSelection;\n      var columns = this.state.columns.concat();\n\n      if (rowSelection) {\n        var data = this.getFlatCurrentPageData().filter(function (item, index) {\n          if (rowSelection.getCheckboxProps) {\n            return !_this6.getCheckboxPropsByItem(item, index).disabled;\n          }\n\n          return true;\n        });\n        var selectionColumnClass = (0, _classnames[\"default\"])(\"\".concat(prefixCls, \"-selection-column\"), _defineProperty({}, \"\".concat(prefixCls, \"-selection-column-custom\"), rowSelection.selections));\n\n        var selectionColumn = _defineProperty({\n          key: 'selection-column',\n          render: this.renderSelectionBox(rowSelection.type),\n          className: selectionColumnClass,\n          fixed: rowSelection.fixed,\n          width: rowSelection.columnWidth,\n          title: rowSelection.columnTitle\n        }, _rcTable.INTERNAL_COL_DEFINE, {\n          className: \"\".concat(prefixCls, \"-selection-col\")\n        });\n\n        if (rowSelection.type !== 'radio') {\n          var checkboxAllDisabled = data.every(function (item, index) {\n            return _this6.getCheckboxPropsByItem(item, index).disabled;\n          });\n          selectionColumn.title = selectionColumn.title || /*#__PURE__*/React.createElement(_SelectionCheckboxAll[\"default\"], {\n            store: this.props.store,\n            locale: locale,\n            data: data,\n            getCheckboxPropsByItem: this.getCheckboxPropsByItem,\n            getRecordKey: this.getRecordKey,\n            disabled: checkboxAllDisabled,\n            prefixCls: prefixCls,\n            onSelect: this.handleSelectRow,\n            selections: rowSelection.selections,\n            hideDefaultSelections: rowSelection.hideDefaultSelections,\n            getPopupContainer: this.generatePopupContainerFunc(getPopupContainer)\n          });\n        }\n\n        if ('fixed' in rowSelection) {\n          selectionColumn.fixed = rowSelection.fixed;\n        } else if (columns.some(function (column) {\n          return column.fixed === 'left' || column.fixed === true;\n        })) {\n          selectionColumn.fixed = 'left';\n        }\n\n        if (columns[0] && columns[0].key === 'selection-column') {\n          columns[0] = selectionColumn;\n        } else {\n          columns.unshift(selectionColumn);\n        }\n      }\n\n      return columns;\n    }\n  }, {\n    key: \"renderColumnsDropdown\",\n    value: function renderColumnsDropdown(_ref7) {\n      var _this7 = this;\n\n      var prefixCls = _ref7.prefixCls,\n          dropdownPrefixCls = _ref7.dropdownPrefixCls,\n          columns = _ref7.columns,\n          locale = _ref7.locale,\n          getPopupContainer = _ref7.getPopupContainer;\n      var _this$state3 = this.state,\n          sortOrder = _this$state3.sortOrder,\n          filters = _this$state3.filters;\n      return (0, _util.treeMap)(columns, function (column, i) {\n        var _classNames4;\n\n        var key = getColumnKey(column, i);\n        var filterDropdown;\n        var sortButton;\n        var onHeaderCell = column.onHeaderCell;\n\n        var isSortColumn = _this7.isSortColumn(column);\n\n        if (column.filters && column.filters.length > 0 || column.filterDropdown) {\n          var colFilters = key in filters ? filters[key] : [];\n          filterDropdown = /*#__PURE__*/React.createElement(_filterDropdown[\"default\"], {\n            locale: locale,\n            column: column,\n            selectedKeys: colFilters,\n            confirmFilter: _this7.handleFilter,\n            prefixCls: \"\".concat(prefixCls, \"-filter\"),\n            dropdownPrefixCls: dropdownPrefixCls || 'ant-dropdown',\n            getPopupContainer: _this7.generatePopupContainerFunc(getPopupContainer),\n            key: \"filter-dropdown\"\n          });\n        }\n\n        if (column.sorter) {\n          var sortDirections = column.sortDirections || _this7.props.sortDirections;\n          var isAscend = isSortColumn && sortOrder === 'ascend';\n          var isDescend = isSortColumn && sortOrder === 'descend';\n          var ascend = sortDirections.indexOf('ascend') !== -1 && /*#__PURE__*/React.createElement(_icon[\"default\"], {\n            className: \"\".concat(prefixCls, \"-column-sorter-up \").concat(isAscend ? 'on' : 'off'),\n            type: \"caret-up\",\n            theme: \"filled\"\n          });\n          var descend = sortDirections.indexOf('descend') !== -1 && /*#__PURE__*/React.createElement(_icon[\"default\"], {\n            className: \"\".concat(prefixCls, \"-column-sorter-down \").concat(isDescend ? 'on' : 'off'),\n            type: \"caret-down\",\n            theme: \"filled\"\n          });\n          sortButton = /*#__PURE__*/React.createElement(\"div\", {\n            title: locale.sortTitle,\n            className: (0, _classnames[\"default\"])(\"\".concat(prefixCls, \"-column-sorter-inner\"), ascend && descend && \"\".concat(prefixCls, \"-column-sorter-inner-full\")),\n            key: \"sorter\"\n          }, ascend, descend);\n\n          onHeaderCell = function onHeaderCell(col) {\n            var colProps = {}; // Get original first\n\n            if (column.onHeaderCell) {\n              colProps = _extends({}, column.onHeaderCell(col));\n            } // Add sorter logic\n\n\n            var onHeaderCellClick = colProps.onClick;\n\n            colProps.onClick = function () {\n              _this7.toggleSortOrder(column);\n\n              if (onHeaderCellClick) {\n                onHeaderCellClick.apply(void 0, arguments);\n              }\n            };\n\n            return colProps;\n          };\n        }\n\n        return _extends(_extends({}, column), {\n          className: (0, _classnames[\"default\"])(column.className, (_classNames4 = {}, _defineProperty(_classNames4, \"\".concat(prefixCls, \"-column-has-actions\"), sortButton || filterDropdown), _defineProperty(_classNames4, \"\".concat(prefixCls, \"-column-has-filters\"), filterDropdown), _defineProperty(_classNames4, \"\".concat(prefixCls, \"-column-has-sorters\"), sortButton), _defineProperty(_classNames4, \"\".concat(prefixCls, \"-column-sort\"), isSortColumn && sortOrder), _classNames4)),\n          title: [/*#__PURE__*/React.createElement(\"span\", {\n            key: \"title\",\n            className: \"\".concat(prefixCls, \"-header-column\")\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: sortButton ? \"\".concat(prefixCls, \"-column-sorters\") : undefined\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"\".concat(prefixCls, \"-column-title\")\n          }, _this7.renderColumnTitle(column.title)), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"\".concat(prefixCls, \"-column-sorter\")\n          }, sortButton))), filterDropdown],\n          onHeaderCell: onHeaderCell\n        });\n      });\n    }\n  }, {\n    key: \"renderColumnTitle\",\n    value: function renderColumnTitle(title) {\n      var _this$state4 = this.state,\n          filters = _this$state4.filters,\n          sortOrder = _this$state4.sortOrder,\n          sortColumn = _this$state4.sortColumn; // https://github.com/ant-design/ant-design/issues/11246#issuecomment-405009167\n\n      if (title instanceof Function) {\n        return title({\n          filters: filters,\n          sortOrder: sortOrder,\n          sortColumn: sortColumn\n        });\n      }\n\n      return title;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(_configProvider.ConfigConsumer, null, this.renderComponent);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var prevProps = prevState.prevProps;\n      var columns = nextProps.columns || (0, _util.normalizeColumns)(nextProps.children);\n\n      var nextState = _extends(_extends({}, prevState), {\n        prevProps: nextProps,\n        columns: columns\n      });\n\n      if ('pagination' in nextProps || 'pagination' in prevProps) {\n        var newPagination = _extends(_extends(_extends({}, defaultPagination), prevState.pagination), nextProps.pagination);\n\n        newPagination.current = newPagination.current || 1;\n        newPagination.pageSize = newPagination.pageSize || 10;\n        nextState = _extends(_extends({}, nextState), {\n          pagination: nextProps.pagination !== false ? newPagination : emptyObject\n        });\n      }\n\n      if (nextProps.rowSelection && 'selectedRowKeys' in nextProps.rowSelection) {\n        nextProps.store.setState({\n          selectedRowKeys: nextProps.rowSelection.selectedRowKeys || []\n        });\n      } else if (prevProps.rowSelection && !nextProps.rowSelection) {\n        nextProps.store.setState({\n          selectedRowKeys: []\n        });\n      }\n\n      if ('dataSource' in nextProps && nextProps.dataSource !== prevProps.dataSource) {\n        nextProps.store.setState({\n          selectionDirty: false\n        });\n      } // https://github.com/ant-design/ant-design/issues/10133\n\n\n      nextProps.setCheckboxPropsCache({}); // Update filters\n\n      var filteredValueColumns = getFilteredValueColumns(nextState, nextState.columns);\n\n      if (filteredValueColumns.length > 0) {\n        var filtersFromColumns = getFiltersFromColumns(nextState, nextState.columns);\n\n        var newFilters = _extends({}, nextState.filters);\n\n        Object.keys(filtersFromColumns).forEach(function (key) {\n          newFilters[key] = filtersFromColumns[key];\n        });\n\n        if (isFiltersChanged(nextState, newFilters)) {\n          nextState = _extends(_extends({}, nextState), {\n            filters: newFilters\n          });\n        }\n      }\n\n      if (!isTheSameComponents(nextProps.components, prevProps.components)) {\n        var components = createComponents(nextProps.components);\n        nextState = _extends(_extends({}, nextState), {\n          components: components\n        });\n      }\n\n      return nextState;\n    }\n  }]);\n\n  return Table;\n}(React.Component);\n\nTable.propTypes = {\n  dataSource: PropTypes.array,\n  columns: PropTypes.array,\n  prefixCls: PropTypes.string,\n  useFixedHeader: PropTypes.bool,\n  rowSelection: PropTypes.object,\n  className: PropTypes.string,\n  size: PropTypes.string,\n  loading: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n  bordered: PropTypes.bool,\n  onChange: PropTypes.func,\n  locale: PropTypes.object,\n  dropdownPrefixCls: PropTypes.string,\n  sortDirections: PropTypes.array,\n  getPopupContainer: PropTypes.func\n};\nTable.defaultProps = {\n  dataSource: [],\n  useFixedHeader: false,\n  className: '',\n  size: 'default',\n  loading: false,\n  bordered: false,\n  indentSize: 20,\n  locale: {},\n  rowKey: 'key',\n  showHeader: true,\n  sortDirections: ['ascend', 'descend'],\n  childrenColumnName: 'children'\n};\n(0, _reactLifecyclesCompat.polyfill)(Table);\n\nvar StoreTable = /*#__PURE__*/function (_React$Component2) {\n  _inherits(StoreTable, _React$Component2);\n\n  var _super2 = _createSuper(StoreTable);\n\n  function StoreTable(props) {\n    var _this8;\n\n    _classCallCheck(this, StoreTable);\n\n    _this8 = _super2.call(this, props);\n\n    _this8.setCheckboxPropsCache = function (cache) {\n      return _this8.CheckboxPropsCache = cache;\n    };\n\n    _this8.CheckboxPropsCache = {};\n    _this8.store = (0, _createStore[\"default\"])({\n      selectedRowKeys: getRowSelection(props).selectedRowKeys || [],\n      selectionDirty: false\n    });\n    return _this8;\n  }\n\n  _createClass(StoreTable, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(Table, _extends({}, this.props, {\n        store: this.store,\n        checkboxPropsCache: this.CheckboxPropsCache,\n        setCheckboxPropsCache: this.setCheckboxPropsCache\n      }));\n    }\n  }]);\n\n  return StoreTable;\n}(React.Component);\n\nStoreTable.displayName = 'withStore(Table)';\nStoreTable.Column = _Column[\"default\"];\nStoreTable.ColumnGroup = _ColumnGroup[\"default\"];\nvar _default = StoreTable;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/xumeihong/Documents/code/git/react/demos/demo2/node_modules/antd/lib/table/Table.js"],"names":["Object","defineProperty","exports","value","React","_interopRequireWildcard","require","_omit","_interopRequireDefault","_rcTable","PropTypes","_classnames","_shallowequal","_reactLifecyclesCompat","_filterDropdown","_createStore","_SelectionBox","_SelectionCheckboxAll","_Column","_ColumnGroup","_createBodyRow","_util","_scrollTo","_pagination","_icon","_spin","_transButton","_LocaleReceiver","_default2","_configProvider","_warning","obj","__esModule","_getRequireWildcardCache","WeakMap","cache","_typeof","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Symbol","iterator","constructor","_defineProperty","enumerable","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","_extends","assign","source","__rest","s","t","indexOf","getOwnPropertySymbols","propertyIsEnumerable","noop","stopPropagation","getRowSelection","rowSelection","getColumnKey","column","index","dataIndex","isSameColumn","a","b","other","Array","isArray","defaultPagination","onChange","onShowSizeChange","emptyObject","createComponents","components","undefined","bodyRow","body","row","isTheSameComponents","components1","components2","every","getFilteredValueColumns","state","columns","flatFilter","filteredValue","getFiltersFromColumns","filters","forEach","col","colKey","isFiltersChanged","keys","some","columnKey","Table","_React$Component","_super","_this","setTableRef","table","rcTable","getCheckboxPropsByItem","item","getCheckboxProps","getRecordKey","checkboxPropsCache","checkboxProps","record","rowKey","recordKey","onRow","prefixCls","custom","store","generatePopupContainerFunc","getPopupContainer","scroll","tableNode","scrollToFirstRow","scrollToFirstRowOnChange","getContainer","bodyTable","handleFilter","nextFilters","pagination","currentColumnKeys","treeMap","c","children","push","current","newState","filtersToSetState","setState","selectionDirty","prepareParamsArguments","handleSelect","rowIndex","checked","nativeEvent","defaultSelection","getState","getDefaultSelection","selectedRowKeys","concat","pivot","rows","getFlatCurrentPageData","realIndex","expandedRowRender","findIndex","shiftKey","changeRowKeys","direction","Math","sign","dist","abs","step","_loop","disabled","includes","filter","j","setSelectedRowKeys","selectWay","handleRadioSelect","handleSelectRow","selectionKey","onSelectFunc","data","changeableRowKeys","map","splice","customSelectionStartIndex","hideDefaultSelections","handlePageChange","_len","otherArguments","_key","handleShowSizeChange","pageSize","nextPagination","renderExpandIcon","_ref","expandable","expanded","needIndentSpaced","onExpand","createElement","componentName","defaultLocale","locale","_classNames","className","onClick","event","collapse","expand","noStyle","renderSelectionBox","type","_","handleChange","renderTable","_ref2","_classNames2","renderEmpty","dropdownPrefixCls","contextLocale","contextGetPopupContainer","_a","showHeader","restTableProps","restProps","getCurrentPageData","expandIconAsCell","realGetPopupContainer","mergedLocale","emptyText","classString","size","bordered","columnsWithRowSelection","renderRowSelection","renderColumnsDropdown","newColumn","expandIconColumnIndex","ref","expandIcon","renderComponent","_ref3","getPrefixCls","_this$props","customizePrefixCls","customizeDropdownPrefixCls","style","loading","spinning","paginationPatchClass","hasPagination","renderPagination","columnsProp","_ref4","fixed","normalizeColumns","getDefaultSortOrder","getDefaultFilters","getDefaultPagination","prevProps","componentDidUpdate","_this$state","sortColumn","sortOrder","getSortOrderColumns","sortState","getSortStateFromColumns","_this2","getFlatData","defaultChecked","defaultCurrent","defaultPageSize","definedFilters","defaultFilteredValueColumns","defaultFilteredValue","defaultFilters","reduce","soFar","definedSortState","defaultSortedColumn","defaultSortOrder","sortedColumn","getMaxCurrent","total","_this$state$paginatio","floor","getSorterFn","_ref5","sorter","getLocalData","Number","MAX_VALUE","slice","childrenColumnName","flatArray","_this3","currentState","dataSource","sorterFn","recursiveSort","findColumn","values","onFilter","v","selectionInfo","_this4","selectedRows","onSelect","onSelectMultiple","changeRows","onSelectAll","_changeRows","onSelectInvert","toggleSortOrder","sortDirections","_this$state2","newSortOrder","methodIndex","isSortColumn","currentColumn","order","field","extra","currentDataSource","myKey","_this5","_this$props$childrenC","sort","paginationPosition","position","_ref6","_this6","selectionColumnClass","selections","selectionColumn","render","width","columnWidth","title","columnTitle","INTERNAL_COL_DEFINE","checkboxAllDisabled","unshift","_ref7","_this7","_this$state3","_classNames4","filterDropdown","sortButton","onHeaderCell","colFilters","selectedKeys","confirmFilter","isAscend","isDescend","ascend","theme","descend","sortTitle","colProps","onHeaderCellClick","renderColumnTitle","_this$state4","Function","ConfigConsumer","getDerivedStateFromProps","nextProps","prevState","nextState","newPagination","setCheckboxPropsCache","filteredValueColumns","filtersFromColumns","newFilters","Component","propTypes","array","string","useFixedHeader","bool","object","oneOfType","func","defaultProps","indentSize","polyfill","StoreTable","_React$Component2","_super2","_this8","CheckboxPropsCache","displayName","Column","ColumnGroup","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _omit = _interopRequireDefault(require(\"omit.js\"));\n\nvar _rcTable = _interopRequireWildcard(require(\"rc-table\"));\n\nvar PropTypes = _interopRequireWildcard(require(\"prop-types\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _shallowequal = _interopRequireDefault(require(\"shallowequal\"));\n\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\n\nvar _filterDropdown = _interopRequireDefault(require(\"./filterDropdown\"));\n\nvar _createStore = _interopRequireDefault(require(\"./createStore\"));\n\nvar _SelectionBox = _interopRequireDefault(require(\"./SelectionBox\"));\n\nvar _SelectionCheckboxAll = _interopRequireDefault(require(\"./SelectionCheckboxAll\"));\n\nvar _Column = _interopRequireDefault(require(\"./Column\"));\n\nvar _ColumnGroup = _interopRequireDefault(require(\"./ColumnGroup\"));\n\nvar _createBodyRow = _interopRequireDefault(require(\"./createBodyRow\"));\n\nvar _util = require(\"./util\");\n\nvar _scrollTo = _interopRequireDefault(require(\"../_util/scrollTo\"));\n\nvar _pagination = _interopRequireDefault(require(\"../pagination\"));\n\nvar _icon = _interopRequireDefault(require(\"../icon\"));\n\nvar _spin = _interopRequireDefault(require(\"../spin\"));\n\nvar _transButton = _interopRequireDefault(require(\"../_util/transButton\"));\n\nvar _LocaleReceiver = _interopRequireDefault(require(\"../locale-provider/LocaleReceiver\"));\n\nvar _default2 = _interopRequireDefault(require(\"../locale/default\"));\n\nvar _configProvider = require(\"../config-provider\");\n\nvar _warning = _interopRequireDefault(require(\"../_util/warning\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nvar __rest = void 0 && (void 0).__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n/* eslint-disable prefer-spread */\n\n\nfunction noop() {}\n\nfunction stopPropagation(e) {\n  e.stopPropagation();\n}\n\nfunction getRowSelection(props) {\n  return props.rowSelection || {};\n}\n\nfunction getColumnKey(column, index) {\n  return column.key || column.dataIndex || index;\n}\n\nfunction isSameColumn(a, b) {\n  if (a && b && a.key && a.key === b.key) {\n    return true;\n  }\n\n  return a === b || (0, _shallowequal[\"default\"])(a, b, function (value, other) {\n    // https://github.com/ant-design/ant-design/issues/12737\n    if (typeof value === 'function' && typeof other === 'function') {\n      return value === other || value.toString() === other.toString();\n    } // https://github.com/ant-design/ant-design/issues/19398\n\n\n    if (Array.isArray(value) && Array.isArray(other)) {\n      return value === other || (0, _shallowequal[\"default\"])(value, other);\n    }\n  });\n}\n\nvar defaultPagination = {\n  onChange: noop,\n  onShowSizeChange: noop\n};\n/**\n * Avoid creating new object, so that parent component's shouldComponentUpdate\n * can works appropriately。\n */\n\nvar emptyObject = {};\n\nvar createComponents = function createComponents() {\n  var components = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var bodyRow = components && components.body && components.body.row;\n  return _extends(_extends({}, components), {\n    body: _extends(_extends({}, components.body), {\n      row: (0, _createBodyRow[\"default\"])(bodyRow)\n    })\n  });\n};\n\nfunction isTheSameComponents() {\n  var components1 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var components2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return components1 === components2 || ['table', 'header', 'body'].every(function (key) {\n    return (0, _shallowequal[\"default\"])(components1[key], components2[key]);\n  });\n}\n\nfunction getFilteredValueColumns(state, columns) {\n  return (0, _util.flatFilter)(columns || (state || {}).columns || [], function (column) {\n    return typeof column.filteredValue !== 'undefined';\n  });\n}\n\nfunction getFiltersFromColumns() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var columns = arguments.length > 1 ? arguments[1] : undefined;\n  var filters = {};\n  getFilteredValueColumns(state, columns).forEach(function (col) {\n    var colKey = getColumnKey(col);\n    filters[colKey] = col.filteredValue;\n  });\n  return filters;\n}\n\nfunction isFiltersChanged(state, filters) {\n  if (Object.keys(filters).length !== Object.keys(state.filters).length) {\n    return true;\n  }\n\n  return Object.keys(filters).some(function (columnKey) {\n    return filters[columnKey] !== state.filters[columnKey];\n  });\n}\n\nvar Table = /*#__PURE__*/function (_React$Component) {\n  _inherits(Table, _React$Component);\n\n  var _super = _createSuper(Table);\n\n  function Table(props) {\n    var _this;\n\n    _classCallCheck(this, Table);\n\n    _this = _super.call(this, props);\n\n    _this.setTableRef = function (table) {\n      _this.rcTable = table;\n    };\n\n    _this.getCheckboxPropsByItem = function (item, index) {\n      var rowSelection = getRowSelection(_this.props);\n\n      if (!rowSelection.getCheckboxProps) {\n        return {};\n      }\n\n      var key = _this.getRecordKey(item, index); // Cache checkboxProps\n\n\n      if (!_this.props.checkboxPropsCache[key]) {\n        _this.props.checkboxPropsCache[key] = rowSelection.getCheckboxProps(item) || {};\n        var checkboxProps = _this.props.checkboxPropsCache[key];\n        (0, _warning[\"default\"])(!('checked' in checkboxProps) && !('defaultChecked' in checkboxProps), 'Table', 'Do not set `checked` or `defaultChecked` in `getCheckboxProps`. Please use `selectedRowKeys` instead.');\n      }\n\n      return _this.props.checkboxPropsCache[key];\n    };\n\n    _this.getRecordKey = function (record, index) {\n      var rowKey = _this.props.rowKey;\n      var recordKey = typeof rowKey === 'function' ? rowKey(record, index) : record[rowKey];\n      (0, _warning[\"default\"])(recordKey !== undefined, 'Table', 'Each record in dataSource of table should have a unique `key` prop, ' + 'or set `rowKey` of Table to an unique primary key, ' + 'see https://u.ant.design/table-row-key');\n      return recordKey === undefined ? index : recordKey;\n    };\n\n    _this.onRow = function (prefixCls, record, index) {\n      var onRow = _this.props.onRow;\n      var custom = onRow ? onRow(record, index) : {};\n      return _extends(_extends({}, custom), {\n        prefixCls: prefixCls,\n        store: _this.props.store,\n        rowKey: _this.getRecordKey(record, index)\n      });\n    };\n\n    _this.generatePopupContainerFunc = function (getPopupContainer) {\n      var scroll = _this.props.scroll;\n      var table = _this.rcTable;\n\n      if (getPopupContainer) {\n        return getPopupContainer;\n      } // Use undefined to let rc component use default logic.\n\n\n      return scroll && table ? function () {\n        return table.tableNode;\n      } : undefined;\n    };\n\n    _this.scrollToFirstRow = function () {\n      var scroll = _this.props.scroll;\n\n      if (scroll && scroll.scrollToFirstRowOnChange !== false) {\n        (0, _scrollTo[\"default\"])(0, {\n          getContainer: function getContainer() {\n            return _this.rcTable.bodyTable;\n          }\n        });\n      }\n    };\n\n    _this.handleFilter = function (column, nextFilters) {\n      var props = _this.props;\n\n      var pagination = _extends({}, _this.state.pagination);\n\n      var filters = _extends(_extends({}, _this.state.filters), _defineProperty({}, getColumnKey(column), nextFilters)); // Remove filters not in current columns\n\n\n      var currentColumnKeys = [];\n      (0, _util.treeMap)(_this.state.columns, function (c) {\n        if (!c.children) {\n          currentColumnKeys.push(getColumnKey(c));\n        }\n      });\n      Object.keys(filters).forEach(function (columnKey) {\n        if (currentColumnKeys.indexOf(columnKey) < 0) {\n          delete filters[columnKey];\n        }\n      });\n\n      if (props.pagination) {\n        // Reset current prop\n        pagination.current = 1;\n        pagination.onChange(pagination.current);\n      }\n\n      var newState = {\n        pagination: pagination,\n        filters: {}\n      };\n\n      var filtersToSetState = _extends({}, filters); // Remove filters which is controlled\n\n\n      getFilteredValueColumns(_this.state).forEach(function (col) {\n        var columnKey = getColumnKey(col);\n\n        if (columnKey) {\n          delete filtersToSetState[columnKey];\n        }\n      });\n\n      if (Object.keys(filtersToSetState).length > 0) {\n        newState.filters = filtersToSetState;\n      } // Controlled current prop will not respond user interaction\n\n\n      if (_typeof(props.pagination) === 'object' && 'current' in props.pagination) {\n        newState.pagination = _extends(_extends({}, pagination), {\n          current: _this.state.pagination.current\n        });\n      }\n\n      _this.setState(newState, function () {\n        _this.scrollToFirstRow();\n\n        _this.props.store.setState({\n          selectionDirty: false\n        });\n\n        var onChange = _this.props.onChange;\n\n        if (onChange) {\n          onChange.apply(null, _this.prepareParamsArguments(_extends(_extends({}, _this.state), {\n            selectionDirty: false,\n            filters: filters,\n            pagination: pagination\n          })));\n        }\n      });\n    };\n\n    _this.handleSelect = function (record, rowIndex, e) {\n      var checked = e.target.checked;\n      var nativeEvent = e.nativeEvent;\n      var defaultSelection = _this.props.store.getState().selectionDirty ? [] : _this.getDefaultSelection();\n\n      var selectedRowKeys = _this.props.store.getState().selectedRowKeys.concat(defaultSelection);\n\n      var key = _this.getRecordKey(record, rowIndex);\n\n      var pivot = _this.state.pivot;\n\n      var rows = _this.getFlatCurrentPageData();\n\n      var realIndex = rowIndex;\n\n      if (_this.props.expandedRowRender) {\n        realIndex = rows.findIndex(function (row) {\n          return _this.getRecordKey(row, rowIndex) === key;\n        });\n      }\n\n      if (nativeEvent.shiftKey && pivot !== undefined && realIndex !== pivot) {\n        var changeRowKeys = [];\n        var direction = Math.sign(pivot - realIndex);\n        var dist = Math.abs(pivot - realIndex);\n        var step = 0;\n\n        var _loop = function _loop() {\n          var i = realIndex + step * direction;\n          step += 1;\n          var row = rows[i];\n\n          var rowKey = _this.getRecordKey(row, i);\n\n          var checkboxProps = _this.getCheckboxPropsByItem(row, i);\n\n          if (!checkboxProps.disabled) {\n            if (selectedRowKeys.includes(rowKey)) {\n              if (!checked) {\n                selectedRowKeys = selectedRowKeys.filter(function (j) {\n                  return rowKey !== j;\n                });\n                changeRowKeys.push(rowKey);\n              }\n            } else if (checked) {\n              selectedRowKeys.push(rowKey);\n              changeRowKeys.push(rowKey);\n            }\n          }\n        };\n\n        while (step <= dist) {\n          _loop();\n        }\n\n        _this.setState({\n          pivot: realIndex\n        });\n\n        _this.props.store.setState({\n          selectionDirty: true\n        });\n\n        _this.setSelectedRowKeys(selectedRowKeys, {\n          selectWay: 'onSelectMultiple',\n          record: record,\n          checked: checked,\n          changeRowKeys: changeRowKeys,\n          nativeEvent: nativeEvent\n        });\n      } else {\n        if (checked) {\n          selectedRowKeys.push(_this.getRecordKey(record, realIndex));\n        } else {\n          selectedRowKeys = selectedRowKeys.filter(function (i) {\n            return key !== i;\n          });\n        }\n\n        _this.setState({\n          pivot: realIndex\n        });\n\n        _this.props.store.setState({\n          selectionDirty: true\n        });\n\n        _this.setSelectedRowKeys(selectedRowKeys, {\n          selectWay: 'onSelect',\n          record: record,\n          checked: checked,\n          changeRowKeys: undefined,\n          nativeEvent: nativeEvent\n        });\n      }\n    };\n\n    _this.handleRadioSelect = function (record, rowIndex, e) {\n      var checked = e.target.checked;\n      var nativeEvent = e.nativeEvent;\n\n      var key = _this.getRecordKey(record, rowIndex);\n\n      var selectedRowKeys = [key];\n\n      _this.props.store.setState({\n        selectionDirty: true\n      });\n\n      _this.setSelectedRowKeys(selectedRowKeys, {\n        selectWay: 'onSelect',\n        record: record,\n        checked: checked,\n        changeRowKeys: undefined,\n        nativeEvent: nativeEvent\n      });\n    };\n\n    _this.handleSelectRow = function (selectionKey, index, onSelectFunc) {\n      var data = _this.getFlatCurrentPageData();\n\n      var defaultSelection = _this.props.store.getState().selectionDirty ? [] : _this.getDefaultSelection();\n\n      var selectedRowKeys = _this.props.store.getState().selectedRowKeys.concat(defaultSelection);\n\n      var changeableRowKeys = data.filter(function (item, i) {\n        return !_this.getCheckboxPropsByItem(item, i).disabled;\n      }).map(function (item, i) {\n        return _this.getRecordKey(item, i);\n      });\n      var changeRowKeys = [];\n      var selectWay = 'onSelectAll';\n      var checked; // handle default selection\n\n      switch (selectionKey) {\n        case 'all':\n          changeableRowKeys.forEach(function (key) {\n            if (selectedRowKeys.indexOf(key) < 0) {\n              selectedRowKeys.push(key);\n              changeRowKeys.push(key);\n            }\n          });\n          selectWay = 'onSelectAll';\n          checked = true;\n          break;\n\n        case 'removeAll':\n          changeableRowKeys.forEach(function (key) {\n            if (selectedRowKeys.indexOf(key) >= 0) {\n              selectedRowKeys.splice(selectedRowKeys.indexOf(key), 1);\n              changeRowKeys.push(key);\n            }\n          });\n          selectWay = 'onSelectAll';\n          checked = false;\n          break;\n\n        case 'invert':\n          changeableRowKeys.forEach(function (key) {\n            if (selectedRowKeys.indexOf(key) < 0) {\n              selectedRowKeys.push(key);\n            } else {\n              selectedRowKeys.splice(selectedRowKeys.indexOf(key), 1);\n            }\n\n            changeRowKeys.push(key);\n            selectWay = 'onSelectInvert';\n          });\n          break;\n\n        default:\n          break;\n      }\n\n      _this.props.store.setState({\n        selectionDirty: true\n      }); // when select custom selection, callback selections[n].onSelect\n\n\n      var rowSelection = _this.props.rowSelection;\n      var customSelectionStartIndex = 2;\n\n      if (rowSelection && rowSelection.hideDefaultSelections) {\n        customSelectionStartIndex = 0;\n      }\n\n      if (index >= customSelectionStartIndex && typeof onSelectFunc === 'function') {\n        return onSelectFunc(changeableRowKeys);\n      }\n\n      _this.setSelectedRowKeys(selectedRowKeys, {\n        selectWay: selectWay,\n        checked: checked,\n        changeRowKeys: changeRowKeys\n      });\n    };\n\n    _this.handlePageChange = function (current) {\n      var props = _this.props;\n\n      var pagination = _extends({}, _this.state.pagination);\n\n      if (current) {\n        pagination.current = current;\n      } else {\n        pagination.current = pagination.current || 1;\n      }\n\n      for (var _len = arguments.length, otherArguments = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        otherArguments[_key - 1] = arguments[_key];\n      }\n\n      pagination.onChange.apply(pagination, [pagination.current].concat(otherArguments));\n      var newState = {\n        pagination: pagination\n      }; // Controlled current prop will not respond user interaction\n\n      if (props.pagination && _typeof(props.pagination) === 'object' && 'current' in props.pagination) {\n        newState.pagination = _extends(_extends({}, pagination), {\n          current: _this.state.pagination.current\n        });\n      }\n\n      _this.setState(newState, _this.scrollToFirstRow);\n\n      _this.props.store.setState({\n        selectionDirty: false\n      });\n\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        onChange.apply(null, _this.prepareParamsArguments(_extends(_extends({}, _this.state), {\n          selectionDirty: false,\n          pagination: pagination\n        })));\n      }\n    };\n\n    _this.handleShowSizeChange = function (current, pageSize) {\n      var pagination = _this.state.pagination;\n      pagination.onShowSizeChange(current, pageSize);\n\n      var nextPagination = _extends(_extends({}, pagination), {\n        pageSize: pageSize,\n        current: current\n      });\n\n      _this.setState({\n        pagination: nextPagination\n      }, _this.scrollToFirstRow);\n\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        onChange.apply(null, _this.prepareParamsArguments(_extends(_extends({}, _this.state), {\n          pagination: nextPagination\n        })));\n      }\n    };\n\n    _this.renderExpandIcon = function (prefixCls) {\n      return function (_ref) {\n        var expandable = _ref.expandable,\n            expanded = _ref.expanded,\n            needIndentSpaced = _ref.needIndentSpaced,\n            record = _ref.record,\n            onExpand = _ref.onExpand;\n\n        if (expandable) {\n          return /*#__PURE__*/React.createElement(_LocaleReceiver[\"default\"], {\n            componentName: \"Table\",\n            defaultLocale: _default2[\"default\"].Table\n          }, function (locale) {\n            var _classNames;\n\n            return /*#__PURE__*/React.createElement(_transButton[\"default\"], {\n              className: (0, _classnames[\"default\"])(\"\".concat(prefixCls, \"-row-expand-icon\"), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-row-collapsed\"), !expanded), _defineProperty(_classNames, \"\".concat(prefixCls, \"-row-expanded\"), expanded), _classNames)),\n              onClick: function onClick(event) {\n                onExpand(record, event);\n              },\n              \"aria-label\": expanded ? locale.collapse : locale.expand,\n              noStyle: true\n            });\n          });\n        }\n\n        if (needIndentSpaced) {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            className: \"\".concat(prefixCls, \"-row-expand-icon \").concat(prefixCls, \"-row-spaced\")\n          });\n        }\n\n        return null;\n      };\n    };\n\n    _this.renderSelectionBox = function (type) {\n      return function (_, record, index) {\n        var rowKey = _this.getRecordKey(record, index);\n\n        var props = _this.getCheckboxPropsByItem(record, index);\n\n        var handleChange = function handleChange(e) {\n          return type === 'radio' ? _this.handleRadioSelect(record, index, e) : _this.handleSelect(record, index, e);\n        };\n\n        return /*#__PURE__*/React.createElement(\"span\", {\n          onClick: stopPropagation\n        }, /*#__PURE__*/React.createElement(_SelectionBox[\"default\"], _extends({\n          type: type,\n          store: _this.props.store,\n          rowIndex: rowKey,\n          onChange: handleChange,\n          defaultSelection: _this.getDefaultSelection()\n        }, props)));\n      };\n    };\n\n    _this.renderTable = function (_ref2) {\n      var _classNames2;\n\n      var prefixCls = _ref2.prefixCls,\n          renderEmpty = _ref2.renderEmpty,\n          dropdownPrefixCls = _ref2.dropdownPrefixCls,\n          contextLocale = _ref2.contextLocale,\n          contextGetPopupContainer = _ref2.getPopupContainer;\n\n      var _a = _this.props,\n          showHeader = _a.showHeader,\n          locale = _a.locale,\n          getPopupContainer = _a.getPopupContainer,\n          restTableProps = __rest(_a, [\"showHeader\", \"locale\", \"getPopupContainer\"]); // do not pass prop.style to rc-table, since already apply it to container div\n\n\n      var restProps = (0, _omit[\"default\"])(restTableProps, ['style']);\n\n      var data = _this.getCurrentPageData();\n\n      var expandIconAsCell = _this.props.expandedRowRender && _this.props.expandIconAsCell !== false; // use props.getPopupContainer first\n\n      var realGetPopupContainer = getPopupContainer || contextGetPopupContainer; // Merge too locales\n\n      var mergedLocale = _extends(_extends({}, contextLocale), locale);\n\n      if (!locale || !locale.emptyText) {\n        mergedLocale.emptyText = renderEmpty('Table');\n      }\n\n      var classString = (0, _classnames[\"default\"])(\"\".concat(prefixCls, \"-\").concat(_this.props.size), (_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(prefixCls, \"-bordered\"), _this.props.bordered), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-empty\"), !data.length), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-without-column-header\"), !showHeader), _classNames2));\n\n      var columnsWithRowSelection = _this.renderRowSelection({\n        prefixCls: prefixCls,\n        locale: mergedLocale,\n        getPopupContainer: realGetPopupContainer\n      });\n\n      var columns = _this.renderColumnsDropdown({\n        columns: columnsWithRowSelection,\n        prefixCls: prefixCls,\n        dropdownPrefixCls: dropdownPrefixCls,\n        locale: mergedLocale,\n        getPopupContainer: realGetPopupContainer\n      }).map(function (column, i) {\n        var newColumn = _extends({}, column);\n\n        newColumn.key = getColumnKey(newColumn, i);\n        return newColumn;\n      });\n\n      var expandIconColumnIndex = columns[0] && columns[0].key === 'selection-column' ? 1 : 0;\n\n      if ('expandIconColumnIndex' in restProps) {\n        expandIconColumnIndex = restProps.expandIconColumnIndex;\n      }\n\n      return /*#__PURE__*/React.createElement(_rcTable[\"default\"], _extends({\n        ref: _this.setTableRef,\n        key: \"table\",\n        expandIcon: _this.renderExpandIcon(prefixCls)\n      }, restProps, {\n        onRow: function onRow(record, index) {\n          return _this.onRow(prefixCls, record, index);\n        },\n        components: _this.state.components,\n        prefixCls: prefixCls,\n        data: data,\n        columns: columns,\n        showHeader: showHeader,\n        className: classString,\n        expandIconColumnIndex: expandIconColumnIndex,\n        expandIconAsCell: expandIconAsCell,\n        emptyText: mergedLocale.emptyText\n      }));\n    };\n\n    _this.renderComponent = function (_ref3) {\n      var getPrefixCls = _ref3.getPrefixCls,\n          renderEmpty = _ref3.renderEmpty,\n          getPopupContainer = _ref3.getPopupContainer;\n      var _this$props = _this.props,\n          customizePrefixCls = _this$props.prefixCls,\n          customizeDropdownPrefixCls = _this$props.dropdownPrefixCls,\n          style = _this$props.style,\n          className = _this$props.className;\n\n      var data = _this.getCurrentPageData();\n\n      var loading = _this.props.loading;\n\n      if (typeof loading === 'boolean') {\n        loading = {\n          spinning: loading\n        };\n      }\n\n      var prefixCls = getPrefixCls('table', customizePrefixCls);\n      var dropdownPrefixCls = getPrefixCls('dropdown', customizeDropdownPrefixCls);\n      var table = /*#__PURE__*/React.createElement(_LocaleReceiver[\"default\"], {\n        componentName: \"Table\",\n        defaultLocale: _default2[\"default\"].Table\n      }, function (locale) {\n        return _this.renderTable({\n          prefixCls: prefixCls,\n          renderEmpty: renderEmpty,\n          dropdownPrefixCls: dropdownPrefixCls,\n          contextLocale: locale,\n          getPopupContainer: getPopupContainer\n        });\n      }); // if there is no pagination or no data,\n      // the height of spin should decrease by half of pagination\n\n      var paginationPatchClass = _this.hasPagination() && data && data.length !== 0 ? \"\".concat(prefixCls, \"-with-pagination\") : \"\".concat(prefixCls, \"-without-pagination\");\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: (0, _classnames[\"default\"])(\"\".concat(prefixCls, \"-wrapper\"), className),\n        style: style\n      }, /*#__PURE__*/React.createElement(_spin[\"default\"], _extends({}, loading, {\n        className: loading.spinning ? \"\".concat(paginationPatchClass, \" \").concat(prefixCls, \"-spin-holder\") : ''\n      }), _this.renderPagination(prefixCls, 'top'), table, _this.renderPagination(prefixCls, 'bottom')));\n    };\n\n    var expandedRowRender = props.expandedRowRender,\n        columnsProp = props.columns;\n    (0, _warning[\"default\"])(!('columnsPageRange' in props || 'columnsPageSize' in props), 'Table', '`columnsPageRange` and `columnsPageSize` are removed, please use ' + 'fixed columns instead, see: https://u.ant.design/fixed-columns.');\n\n    if (expandedRowRender && (columnsProp || []).some(function (_ref4) {\n      var fixed = _ref4.fixed;\n      return !!fixed;\n    })) {\n      (0, _warning[\"default\"])(false, 'Table', '`expandedRowRender` and `Column.fixed` are not compatible. Please use one of them at one time.');\n    }\n\n    var columns = columnsProp || (0, _util.normalizeColumns)(props.children);\n    _this.state = _extends(_extends({}, _this.getDefaultSortOrder(columns || [])), {\n      // 减少状态\n      filters: _this.getDefaultFilters(columns),\n      pagination: _this.getDefaultPagination(props),\n      pivot: undefined,\n      prevProps: props,\n      components: createComponents(props.components),\n      columns: columns\n    });\n    return _this;\n  }\n\n  _createClass(Table, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this$state = this.state,\n          columns = _this$state.columns,\n          sortColumn = _this$state.sortColumn,\n          sortOrder = _this$state.sortOrder;\n\n      if (this.getSortOrderColumns(columns).length > 0) {\n        var sortState = this.getSortStateFromColumns(columns);\n\n        if (!isSameColumn(sortState.sortColumn, sortColumn) || sortState.sortOrder !== sortOrder) {\n          this.setState(sortState);\n        }\n      }\n    }\n  }, {\n    key: \"getDefaultSelection\",\n    value: function getDefaultSelection() {\n      var _this2 = this;\n\n      var rowSelection = getRowSelection(this.props);\n\n      if (!rowSelection.getCheckboxProps) {\n        return [];\n      }\n\n      return this.getFlatData().filter(function (item, rowIndex) {\n        return _this2.getCheckboxPropsByItem(item, rowIndex).defaultChecked;\n      }).map(function (record, rowIndex) {\n        return _this2.getRecordKey(record, rowIndex);\n      });\n    }\n  }, {\n    key: \"getDefaultPagination\",\n    value: function getDefaultPagination(props) {\n      var pagination = _typeof(props.pagination) === 'object' ? props.pagination : {};\n      var current;\n\n      if ('current' in pagination) {\n        current = pagination.current;\n      } else if ('defaultCurrent' in pagination) {\n        current = pagination.defaultCurrent;\n      }\n\n      var pageSize;\n\n      if ('pageSize' in pagination) {\n        pageSize = pagination.pageSize;\n      } else if ('defaultPageSize' in pagination) {\n        pageSize = pagination.defaultPageSize;\n      }\n\n      return this.hasPagination(props) ? _extends(_extends(_extends({}, defaultPagination), pagination), {\n        current: current || 1,\n        pageSize: pageSize || 10\n      }) : {};\n    }\n  }, {\n    key: \"getSortOrderColumns\",\n    value: function getSortOrderColumns(columns) {\n      return (0, _util.flatFilter)(columns || (this.state || {}).columns || [], function (column) {\n        return 'sortOrder' in column;\n      });\n    }\n  }, {\n    key: \"getDefaultFilters\",\n    value: function getDefaultFilters(columns) {\n      var definedFilters = getFiltersFromColumns(this.state, columns);\n      var defaultFilteredValueColumns = (0, _util.flatFilter)(columns || [], function (column) {\n        return typeof column.defaultFilteredValue !== 'undefined';\n      });\n      var defaultFilters = defaultFilteredValueColumns.reduce(function (soFar, col) {\n        var colKey = getColumnKey(col);\n        soFar[colKey] = col.defaultFilteredValue;\n        return soFar;\n      }, {});\n      return _extends(_extends({}, defaultFilters), definedFilters);\n    }\n  }, {\n    key: \"getDefaultSortOrder\",\n    value: function getDefaultSortOrder(columns) {\n      var definedSortState = this.getSortStateFromColumns(columns);\n      var defaultSortedColumn = (0, _util.flatFilter)(columns || [], function (column) {\n        return column.defaultSortOrder != null;\n      })[0];\n\n      if (defaultSortedColumn && !definedSortState.sortColumn) {\n        return {\n          sortColumn: defaultSortedColumn,\n          sortOrder: defaultSortedColumn.defaultSortOrder\n        };\n      }\n\n      return definedSortState;\n    }\n  }, {\n    key: \"getSortStateFromColumns\",\n    value: function getSortStateFromColumns(columns) {\n      // return first column which sortOrder is not falsy\n      var sortedColumn = this.getSortOrderColumns(columns).filter(function (col) {\n        return col.sortOrder;\n      })[0];\n\n      if (sortedColumn) {\n        return {\n          sortColumn: sortedColumn,\n          sortOrder: sortedColumn.sortOrder\n        };\n      }\n\n      return {\n        sortColumn: null,\n        sortOrder: null\n      };\n    }\n  }, {\n    key: \"getMaxCurrent\",\n    value: function getMaxCurrent(total) {\n      var _this$state$paginatio = this.state.pagination,\n          current = _this$state$paginatio.current,\n          pageSize = _this$state$paginatio.pageSize;\n\n      if ((current - 1) * pageSize >= total) {\n        return Math.floor((total - 1) / pageSize) + 1;\n      }\n\n      return current;\n    }\n  }, {\n    key: \"getSorterFn\",\n    value: function getSorterFn(state) {\n      var _ref5 = state || this.state,\n          sortOrder = _ref5.sortOrder,\n          sortColumn = _ref5.sortColumn;\n\n      if (!sortOrder || !sortColumn || typeof sortColumn.sorter !== 'function') {\n        return;\n      }\n\n      return function (a, b) {\n        var result = sortColumn.sorter(a, b, sortOrder);\n\n        if (result !== 0) {\n          return sortOrder === 'descend' ? -result : result;\n        }\n\n        return 0;\n      };\n    }\n  }, {\n    key: \"getCurrentPageData\",\n    value: function getCurrentPageData() {\n      var data = this.getLocalData();\n      var current;\n      var pageSize;\n      var state = this.state; // 如果没有分页的话，默认全部展示\n\n      if (!this.hasPagination()) {\n        pageSize = Number.MAX_VALUE;\n        current = 1;\n      } else {\n        pageSize = state.pagination.pageSize;\n        current = this.getMaxCurrent(state.pagination.total || data.length);\n      } // 分页\n      // ---\n      // 当数据量少于等于每页数量时，直接设置数据\n      // 否则进行读取分页数据\n\n\n      if (data.length > pageSize || pageSize === Number.MAX_VALUE) {\n        data = data.slice((current - 1) * pageSize, current * pageSize);\n      }\n\n      return data;\n    }\n  }, {\n    key: \"getFlatData\",\n    value: function getFlatData() {\n      var childrenColumnName = this.props.childrenColumnName;\n      return (0, _util.flatArray)(this.getLocalData(null, false), childrenColumnName);\n    }\n  }, {\n    key: \"getFlatCurrentPageData\",\n    value: function getFlatCurrentPageData() {\n      var childrenColumnName = this.props.childrenColumnName;\n      return (0, _util.flatArray)(this.getCurrentPageData(), childrenColumnName);\n    }\n  }, {\n    key: \"getLocalData\",\n    value: function getLocalData(state) {\n      var _this3 = this;\n\n      var filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var currentState = state || this.state;\n      var dataSource = this.props.dataSource;\n      var data = dataSource || []; // 优化本地排序\n\n      data = data.slice(0);\n      var sorterFn = this.getSorterFn(currentState);\n\n      if (sorterFn) {\n        data = this.recursiveSort(data, sorterFn);\n      } // 筛选\n\n\n      if (filter && currentState.filters) {\n        Object.keys(currentState.filters).forEach(function (columnKey) {\n          var col = _this3.findColumn(columnKey);\n\n          if (!col) {\n            return;\n          }\n\n          var values = currentState.filters[columnKey] || [];\n\n          if (values.length === 0) {\n            return;\n          }\n\n          var onFilter = col.onFilter;\n          data = onFilter ? data.filter(function (record) {\n            return values.some(function (v) {\n              return onFilter(v, record);\n            });\n          }) : data;\n        });\n      }\n\n      return data;\n    }\n  }, {\n    key: \"setSelectedRowKeys\",\n    value: function setSelectedRowKeys(selectedRowKeys, selectionInfo) {\n      var _this4 = this;\n\n      var selectWay = selectionInfo.selectWay,\n          record = selectionInfo.record,\n          checked = selectionInfo.checked,\n          changeRowKeys = selectionInfo.changeRowKeys,\n          nativeEvent = selectionInfo.nativeEvent;\n      var rowSelection = getRowSelection(this.props);\n\n      if (rowSelection && !('selectedRowKeys' in rowSelection)) {\n        this.props.store.setState({\n          selectedRowKeys: selectedRowKeys\n        });\n      }\n\n      var data = this.getFlatData();\n\n      if (!rowSelection.onChange && !rowSelection[selectWay]) {\n        return;\n      }\n\n      var selectedRows = data.filter(function (row, i) {\n        return selectedRowKeys.indexOf(_this4.getRecordKey(row, i)) >= 0;\n      });\n\n      if (rowSelection.onChange) {\n        rowSelection.onChange(selectedRowKeys, selectedRows);\n      }\n\n      if (selectWay === 'onSelect' && rowSelection.onSelect) {\n        rowSelection.onSelect(record, checked, selectedRows, nativeEvent);\n      } else if (selectWay === 'onSelectMultiple' && rowSelection.onSelectMultiple) {\n        var changeRows = data.filter(function (row, i) {\n          return changeRowKeys.indexOf(_this4.getRecordKey(row, i)) >= 0;\n        });\n        rowSelection.onSelectMultiple(checked, selectedRows, changeRows);\n      } else if (selectWay === 'onSelectAll' && rowSelection.onSelectAll) {\n        var _changeRows = data.filter(function (row, i) {\n          return changeRowKeys.indexOf(_this4.getRecordKey(row, i)) >= 0;\n        });\n\n        rowSelection.onSelectAll(checked, selectedRows, _changeRows);\n      } else if (selectWay === 'onSelectInvert' && rowSelection.onSelectInvert) {\n        rowSelection.onSelectInvert(selectedRowKeys);\n      }\n    }\n  }, {\n    key: \"toggleSortOrder\",\n    value: function toggleSortOrder(column) {\n      var sortDirections = column.sortDirections || this.props.sortDirections;\n      var _this$state2 = this.state,\n          sortOrder = _this$state2.sortOrder,\n          sortColumn = _this$state2.sortColumn; // 只同时允许一列进行排序，否则会导致排序顺序的逻辑问题\n\n      var newSortOrder; // 切换另一列时，丢弃 sortOrder 的状态\n\n      if (isSameColumn(sortColumn, column) && sortOrder !== undefined) {\n        // 按照sortDirections的内容依次切换排序状态\n        var methodIndex = sortDirections.indexOf(sortOrder) + 1;\n        newSortOrder = methodIndex === sortDirections.length ? undefined : sortDirections[methodIndex];\n      } else {\n        newSortOrder = sortDirections[0];\n      }\n\n      var newState = {\n        sortOrder: newSortOrder,\n        sortColumn: newSortOrder ? column : null\n      }; // Controlled\n\n      if (this.getSortOrderColumns().length === 0) {\n        this.setState(newState, this.scrollToFirstRow);\n      }\n\n      var onChange = this.props.onChange;\n\n      if (onChange) {\n        onChange.apply(null, this.prepareParamsArguments(_extends(_extends({}, this.state), newState), column));\n      }\n    }\n  }, {\n    key: \"hasPagination\",\n    value: function hasPagination(props) {\n      return (props || this.props).pagination !== false;\n    }\n  }, {\n    key: \"isSortColumn\",\n    value: function isSortColumn(column) {\n      var sortColumn = this.state.sortColumn;\n\n      if (!column || !sortColumn) {\n        return false;\n      }\n\n      return getColumnKey(sortColumn) === getColumnKey(column);\n    } // Get pagination, filters, sorter\n\n  }, {\n    key: \"prepareParamsArguments\",\n    value: function prepareParamsArguments(state, column) {\n      var pagination = _extends({}, state.pagination); // remove useless handle function in Table.onChange\n\n\n      delete pagination.onChange;\n      delete pagination.onShowSizeChange;\n      var filters = state.filters;\n      var sorter = {};\n      var currentColumn = column;\n\n      if (state.sortColumn && state.sortOrder) {\n        currentColumn = state.sortColumn;\n        sorter.column = state.sortColumn;\n        sorter.order = state.sortOrder;\n      }\n\n      if (currentColumn) {\n        sorter.field = currentColumn.dataIndex;\n        sorter.columnKey = getColumnKey(currentColumn);\n      }\n\n      var extra = {\n        currentDataSource: this.getLocalData(state)\n      };\n      return [pagination, filters, sorter, extra];\n    }\n  }, {\n    key: \"findColumn\",\n    value: function findColumn(myKey) {\n      var column;\n      (0, _util.treeMap)(this.state.columns, function (c) {\n        if (getColumnKey(c) === myKey) {\n          column = c;\n        }\n      });\n      return column;\n    }\n  }, {\n    key: \"recursiveSort\",\n    value: function recursiveSort(data, sorterFn) {\n      var _this5 = this;\n\n      var _this$props$childrenC = this.props.childrenColumnName,\n          childrenColumnName = _this$props$childrenC === void 0 ? 'children' : _this$props$childrenC;\n      return data.sort(sorterFn).map(function (item) {\n        return item[childrenColumnName] ? _extends(_extends({}, item), _defineProperty({}, childrenColumnName, _this5.recursiveSort(item[childrenColumnName], sorterFn))) : item;\n      });\n    }\n  }, {\n    key: \"renderPagination\",\n    value: function renderPagination(prefixCls, paginationPosition) {\n      // 强制不需要分页\n      if (!this.hasPagination()) {\n        return null;\n      }\n\n      var size = 'default';\n      var pagination = this.state.pagination;\n\n      if (pagination.size) {\n        size = pagination.size;\n      } else if (this.props.size === 'middle' || this.props.size === 'small') {\n        size = 'small';\n      }\n\n      var position = pagination.position || 'bottom';\n      var total = pagination.total || this.getLocalData().length;\n      return total > 0 && (position === paginationPosition || position === 'both') ? /*#__PURE__*/React.createElement(_pagination[\"default\"], _extends({\n        key: \"pagination-\".concat(paginationPosition)\n      }, pagination, {\n        className: (0, _classnames[\"default\"])(pagination.className, \"\".concat(prefixCls, \"-pagination\")),\n        onChange: this.handlePageChange,\n        total: total,\n        size: size,\n        current: this.getMaxCurrent(total),\n        onShowSizeChange: this.handleShowSizeChange\n      })) : null;\n    }\n  }, {\n    key: \"renderRowSelection\",\n    value: function renderRowSelection(_ref6) {\n      var _this6 = this;\n\n      var prefixCls = _ref6.prefixCls,\n          locale = _ref6.locale,\n          getPopupContainer = _ref6.getPopupContainer;\n      var rowSelection = this.props.rowSelection;\n      var columns = this.state.columns.concat();\n\n      if (rowSelection) {\n        var data = this.getFlatCurrentPageData().filter(function (item, index) {\n          if (rowSelection.getCheckboxProps) {\n            return !_this6.getCheckboxPropsByItem(item, index).disabled;\n          }\n\n          return true;\n        });\n        var selectionColumnClass = (0, _classnames[\"default\"])(\"\".concat(prefixCls, \"-selection-column\"), _defineProperty({}, \"\".concat(prefixCls, \"-selection-column-custom\"), rowSelection.selections));\n\n        var selectionColumn = _defineProperty({\n          key: 'selection-column',\n          render: this.renderSelectionBox(rowSelection.type),\n          className: selectionColumnClass,\n          fixed: rowSelection.fixed,\n          width: rowSelection.columnWidth,\n          title: rowSelection.columnTitle\n        }, _rcTable.INTERNAL_COL_DEFINE, {\n          className: \"\".concat(prefixCls, \"-selection-col\")\n        });\n\n        if (rowSelection.type !== 'radio') {\n          var checkboxAllDisabled = data.every(function (item, index) {\n            return _this6.getCheckboxPropsByItem(item, index).disabled;\n          });\n          selectionColumn.title = selectionColumn.title || /*#__PURE__*/React.createElement(_SelectionCheckboxAll[\"default\"], {\n            store: this.props.store,\n            locale: locale,\n            data: data,\n            getCheckboxPropsByItem: this.getCheckboxPropsByItem,\n            getRecordKey: this.getRecordKey,\n            disabled: checkboxAllDisabled,\n            prefixCls: prefixCls,\n            onSelect: this.handleSelectRow,\n            selections: rowSelection.selections,\n            hideDefaultSelections: rowSelection.hideDefaultSelections,\n            getPopupContainer: this.generatePopupContainerFunc(getPopupContainer)\n          });\n        }\n\n        if ('fixed' in rowSelection) {\n          selectionColumn.fixed = rowSelection.fixed;\n        } else if (columns.some(function (column) {\n          return column.fixed === 'left' || column.fixed === true;\n        })) {\n          selectionColumn.fixed = 'left';\n        }\n\n        if (columns[0] && columns[0].key === 'selection-column') {\n          columns[0] = selectionColumn;\n        } else {\n          columns.unshift(selectionColumn);\n        }\n      }\n\n      return columns;\n    }\n  }, {\n    key: \"renderColumnsDropdown\",\n    value: function renderColumnsDropdown(_ref7) {\n      var _this7 = this;\n\n      var prefixCls = _ref7.prefixCls,\n          dropdownPrefixCls = _ref7.dropdownPrefixCls,\n          columns = _ref7.columns,\n          locale = _ref7.locale,\n          getPopupContainer = _ref7.getPopupContainer;\n      var _this$state3 = this.state,\n          sortOrder = _this$state3.sortOrder,\n          filters = _this$state3.filters;\n      return (0, _util.treeMap)(columns, function (column, i) {\n        var _classNames4;\n\n        var key = getColumnKey(column, i);\n        var filterDropdown;\n        var sortButton;\n        var onHeaderCell = column.onHeaderCell;\n\n        var isSortColumn = _this7.isSortColumn(column);\n\n        if (column.filters && column.filters.length > 0 || column.filterDropdown) {\n          var colFilters = key in filters ? filters[key] : [];\n          filterDropdown = /*#__PURE__*/React.createElement(_filterDropdown[\"default\"], {\n            locale: locale,\n            column: column,\n            selectedKeys: colFilters,\n            confirmFilter: _this7.handleFilter,\n            prefixCls: \"\".concat(prefixCls, \"-filter\"),\n            dropdownPrefixCls: dropdownPrefixCls || 'ant-dropdown',\n            getPopupContainer: _this7.generatePopupContainerFunc(getPopupContainer),\n            key: \"filter-dropdown\"\n          });\n        }\n\n        if (column.sorter) {\n          var sortDirections = column.sortDirections || _this7.props.sortDirections;\n          var isAscend = isSortColumn && sortOrder === 'ascend';\n          var isDescend = isSortColumn && sortOrder === 'descend';\n          var ascend = sortDirections.indexOf('ascend') !== -1 && /*#__PURE__*/React.createElement(_icon[\"default\"], {\n            className: \"\".concat(prefixCls, \"-column-sorter-up \").concat(isAscend ? 'on' : 'off'),\n            type: \"caret-up\",\n            theme: \"filled\"\n          });\n          var descend = sortDirections.indexOf('descend') !== -1 && /*#__PURE__*/React.createElement(_icon[\"default\"], {\n            className: \"\".concat(prefixCls, \"-column-sorter-down \").concat(isDescend ? 'on' : 'off'),\n            type: \"caret-down\",\n            theme: \"filled\"\n          });\n          sortButton = /*#__PURE__*/React.createElement(\"div\", {\n            title: locale.sortTitle,\n            className: (0, _classnames[\"default\"])(\"\".concat(prefixCls, \"-column-sorter-inner\"), ascend && descend && \"\".concat(prefixCls, \"-column-sorter-inner-full\")),\n            key: \"sorter\"\n          }, ascend, descend);\n\n          onHeaderCell = function onHeaderCell(col) {\n            var colProps = {}; // Get original first\n\n            if (column.onHeaderCell) {\n              colProps = _extends({}, column.onHeaderCell(col));\n            } // Add sorter logic\n\n\n            var onHeaderCellClick = colProps.onClick;\n\n            colProps.onClick = function () {\n              _this7.toggleSortOrder(column);\n\n              if (onHeaderCellClick) {\n                onHeaderCellClick.apply(void 0, arguments);\n              }\n            };\n\n            return colProps;\n          };\n        }\n\n        return _extends(_extends({}, column), {\n          className: (0, _classnames[\"default\"])(column.className, (_classNames4 = {}, _defineProperty(_classNames4, \"\".concat(prefixCls, \"-column-has-actions\"), sortButton || filterDropdown), _defineProperty(_classNames4, \"\".concat(prefixCls, \"-column-has-filters\"), filterDropdown), _defineProperty(_classNames4, \"\".concat(prefixCls, \"-column-has-sorters\"), sortButton), _defineProperty(_classNames4, \"\".concat(prefixCls, \"-column-sort\"), isSortColumn && sortOrder), _classNames4)),\n          title: [/*#__PURE__*/React.createElement(\"span\", {\n            key: \"title\",\n            className: \"\".concat(prefixCls, \"-header-column\")\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: sortButton ? \"\".concat(prefixCls, \"-column-sorters\") : undefined\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: \"\".concat(prefixCls, \"-column-title\")\n          }, _this7.renderColumnTitle(column.title)), /*#__PURE__*/React.createElement(\"span\", {\n            className: \"\".concat(prefixCls, \"-column-sorter\")\n          }, sortButton))), filterDropdown],\n          onHeaderCell: onHeaderCell\n        });\n      });\n    }\n  }, {\n    key: \"renderColumnTitle\",\n    value: function renderColumnTitle(title) {\n      var _this$state4 = this.state,\n          filters = _this$state4.filters,\n          sortOrder = _this$state4.sortOrder,\n          sortColumn = _this$state4.sortColumn; // https://github.com/ant-design/ant-design/issues/11246#issuecomment-405009167\n\n      if (title instanceof Function) {\n        return title({\n          filters: filters,\n          sortOrder: sortOrder,\n          sortColumn: sortColumn\n        });\n      }\n\n      return title;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(_configProvider.ConfigConsumer, null, this.renderComponent);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var prevProps = prevState.prevProps;\n      var columns = nextProps.columns || (0, _util.normalizeColumns)(nextProps.children);\n\n      var nextState = _extends(_extends({}, prevState), {\n        prevProps: nextProps,\n        columns: columns\n      });\n\n      if ('pagination' in nextProps || 'pagination' in prevProps) {\n        var newPagination = _extends(_extends(_extends({}, defaultPagination), prevState.pagination), nextProps.pagination);\n\n        newPagination.current = newPagination.current || 1;\n        newPagination.pageSize = newPagination.pageSize || 10;\n        nextState = _extends(_extends({}, nextState), {\n          pagination: nextProps.pagination !== false ? newPagination : emptyObject\n        });\n      }\n\n      if (nextProps.rowSelection && 'selectedRowKeys' in nextProps.rowSelection) {\n        nextProps.store.setState({\n          selectedRowKeys: nextProps.rowSelection.selectedRowKeys || []\n        });\n      } else if (prevProps.rowSelection && !nextProps.rowSelection) {\n        nextProps.store.setState({\n          selectedRowKeys: []\n        });\n      }\n\n      if ('dataSource' in nextProps && nextProps.dataSource !== prevProps.dataSource) {\n        nextProps.store.setState({\n          selectionDirty: false\n        });\n      } // https://github.com/ant-design/ant-design/issues/10133\n\n\n      nextProps.setCheckboxPropsCache({}); // Update filters\n\n      var filteredValueColumns = getFilteredValueColumns(nextState, nextState.columns);\n\n      if (filteredValueColumns.length > 0) {\n        var filtersFromColumns = getFiltersFromColumns(nextState, nextState.columns);\n\n        var newFilters = _extends({}, nextState.filters);\n\n        Object.keys(filtersFromColumns).forEach(function (key) {\n          newFilters[key] = filtersFromColumns[key];\n        });\n\n        if (isFiltersChanged(nextState, newFilters)) {\n          nextState = _extends(_extends({}, nextState), {\n            filters: newFilters\n          });\n        }\n      }\n\n      if (!isTheSameComponents(nextProps.components, prevProps.components)) {\n        var components = createComponents(nextProps.components);\n        nextState = _extends(_extends({}, nextState), {\n          components: components\n        });\n      }\n\n      return nextState;\n    }\n  }]);\n\n  return Table;\n}(React.Component);\n\nTable.propTypes = {\n  dataSource: PropTypes.array,\n  columns: PropTypes.array,\n  prefixCls: PropTypes.string,\n  useFixedHeader: PropTypes.bool,\n  rowSelection: PropTypes.object,\n  className: PropTypes.string,\n  size: PropTypes.string,\n  loading: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n  bordered: PropTypes.bool,\n  onChange: PropTypes.func,\n  locale: PropTypes.object,\n  dropdownPrefixCls: PropTypes.string,\n  sortDirections: PropTypes.array,\n  getPopupContainer: PropTypes.func\n};\nTable.defaultProps = {\n  dataSource: [],\n  useFixedHeader: false,\n  className: '',\n  size: 'default',\n  loading: false,\n  bordered: false,\n  indentSize: 20,\n  locale: {},\n  rowKey: 'key',\n  showHeader: true,\n  sortDirections: ['ascend', 'descend'],\n  childrenColumnName: 'children'\n};\n(0, _reactLifecyclesCompat.polyfill)(Table);\n\nvar StoreTable = /*#__PURE__*/function (_React$Component2) {\n  _inherits(StoreTable, _React$Component2);\n\n  var _super2 = _createSuper(StoreTable);\n\n  function StoreTable(props) {\n    var _this8;\n\n    _classCallCheck(this, StoreTable);\n\n    _this8 = _super2.call(this, props);\n\n    _this8.setCheckboxPropsCache = function (cache) {\n      return _this8.CheckboxPropsCache = cache;\n    };\n\n    _this8.CheckboxPropsCache = {};\n    _this8.store = (0, _createStore[\"default\"])({\n      selectedRowKeys: getRowSelection(props).selectedRowKeys || [],\n      selectionDirty: false\n    });\n    return _this8;\n  }\n\n  _createClass(StoreTable, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(Table, _extends({}, this.props, {\n        store: this.store,\n        checkboxPropsCache: this.CheckboxPropsCache,\n        setCheckboxPropsCache: this.setCheckboxPropsCache\n      }));\n    }\n  }]);\n\n  return StoreTable;\n}(React.Component);\n\nStoreTable.displayName = 'withStore(Table)';\nStoreTable.Column = _Column[\"default\"];\nStoreTable.ColumnGroup = _ColumnGroup[\"default\"];\nvar _default = StoreTable;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}