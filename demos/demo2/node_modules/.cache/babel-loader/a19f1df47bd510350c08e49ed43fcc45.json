{"ast":null,"code":"import \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/card/style\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport \"antd/lib/radio/style\";\nimport _Radio from \"antd/lib/radio\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nvar _jsxFileName = \"/Users/xumeihong/Documents/code/git/react/demos/demo2/src/pages/city/index.js\";\nimport React from 'react';\nimport Axios from '../../axios/index';\nimport Utils from '../../utils/utils';\nconst FormItem = _Form.Item;\nconst Option = _Select.Option;\nconst RadioGroup = _Radio.Group;\n\nclass City extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.requestList = () => {\n      Axios.ajax({\n        url: '/demo/mock/open_city',\n        data: {\n          params: {\n            page: this.params.page\n          }\n        }\n      }).then(res => {\n        if (res && res.result.item_list) {\n          this.setState({\n            list: res.result.item_list.map((item, index) => {\n              item.key = index;\n              return item;\n            }),\n            pagination: Utils.pagination(res, current => {\n              this.params.page = current;\n              this.requestList();\n            })\n          });\n        }\n      }).catch(e => {\n        throw new Error(e);\n      });\n    };\n\n    this.handleOpenCity = () => {\n      this.setState({\n        isShowOpenCity: true\n      });\n    };\n\n    this.handleSubmit = () => {\n      let openCityInfo = this.cityForm.props.form.getFieldsValue();\n      Axios.ajax({\n        url: \"/demo/mock/city/open\",\n        data: {\n          params: openCityInfo\n        }\n      }).then(data => {\n        _message.success(data.result);\n\n        this.setState({\n          isShowOpenCity: false\n        });\n      }).catch(error => {\n        throw new Error(error);\n      });\n    };\n\n    this.state = {\n      isShowOpenCity: false\n    };\n    this.params = {\n      page: 1\n    };\n    this.cityForm = null;\n  }\n\n  componentDidMount() {\n    const columns = [{\n      title: '城市id',\n      dataIndex: 'id'\n    }, {\n      title: '城市名称',\n      dataIndex: 'name'\n    }, {\n      title: '用车模式',\n      dataIndex: 'mode',\n      render: mode => {\n        return mode == 1 ? \"指定停车点\" : \"禁停区\";\n      }\n    }, {\n      title: '营运模式',\n      dataIndex: 'op_mode',\n      render: op_mode => {\n        return op_mode == 1 ? \"自营\" : \"加盟\";\n      }\n    }, {\n      title: '授权加盟商',\n      dataIndex: 'franchisee_name'\n    }, {\n      title: '城市管理员',\n      dataIndex: 'city_admins',\n      render: city_admins => {\n        return city_admins.map(item => {\n          return item.user_name;\n        }).join('|');\n      }\n    }, {\n      title: '城市开通时间',\n      dataIndex: 'open_time'\n    }, {\n      title: '操作时间',\n      dataIndex: 'update_time',\n      render: update_time => {\n        return Utils.formatDate(update_time);\n      }\n    }, {\n      title: '操作人',\n      dataIndex: 'sys_user_name'\n    }];\n    this.setState({\n      columns\n    });\n    this.requestList();\n  } // 默认请求接口数据\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(_Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FilterForm, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(_Card, {\n      style: {\n        marginTop: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.handleOpenCity,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }\n    }, \"\\u5F00\\u901A\\u57CE\\u5E02\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Table, {\n      bordered: true,\n      columns: this.state.columns,\n      dataSource: this.state.list,\n      pagination: this.state.pagination,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(_Modal, {\n      title: \"\\u5F00\\u901A\\u57CE\\u5E02\",\n      visible: this.state.isShowOpenCity,\n      onOk: this.handleSubmit,\n      onCancel: () => {\n        this.setState({\n          isShowOpenCity: false\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(OpenCityForm, {\n      wrappedComponentRef: element => {\n        this.cityForm = element;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nclass FilterForm extends React.Component {\n  render() {\n    const {\n      getFieldDecorator\n    } = this.props.form;\n    return /*#__PURE__*/React.createElement(_Form, {\n      layout: \"inline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormItem, {\n      label: \"\\u57CE\\u5E02\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }, getFieldDecorator(\"city_id\", {\n      initialValue: \"\"\n    })( /*#__PURE__*/React.createElement(_Select, {\n      placeholder: \"\\u5168\\u90E8\",\n      style: {\n        width: 80\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 33\n      }\n    }, \"\\u5168\\u90E8\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 33\n      }\n    }, \"\\u5317\\u4EAC\\u5E02\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 33\n      }\n    }, \"\\u5929\\u6D25\\u5E02\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 33\n      }\n    }, \"\\u6DF1\\u5733\\u5E02\")))), /*#__PURE__*/React.createElement(FormItem, {\n      label: \"\\u7528\\u8F66\\u6A21\\u5F0F\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }, getFieldDecorator(\"mode\", {\n      initialValue: \"\"\n    })( /*#__PURE__*/React.createElement(_Select, {\n      placeholder: \"\\u5168\\u90E8\",\n      style: {\n        width: 130\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 33\n      }\n    }, \"\\u5168\\u90E8\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 33\n      }\n    }, \"\\u6307\\u5B9A\\u505C\\u8F66\\u70B9\\u6A21\\u5F0F\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 33\n      }\n    }, \"\\u7981\\u505C\\u533A\\u6A21\\u5F0F\")))), /*#__PURE__*/React.createElement(FormItem, {\n      label: \"\\u8FD0\\u8425\\u6A21\\u5F0F\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    }, getFieldDecorator(\"op_mode\", {\n      initialValue: \"\"\n    })( /*#__PURE__*/React.createElement(_Select, {\n      style: {\n        width: 80\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 33\n      }\n    }, \"\\u5168\\u90E8\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 33\n      }\n    }, \"\\u81EA\\u8425\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 33\n      }\n    }, \"\\u52A0\\u76DF\")))), /*#__PURE__*/React.createElement(FormItem, {\n      label: \"\\u52A0\\u76DF\\u5546\\u6388\\u6743\\u72B6\\u6001\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }\n    }, getFieldDecorator(\"auth_status\", {\n      initialValue: \"\"\n    })( /*#__PURE__*/React.createElement(_Select, {\n      placeholder: \"\\u5168\\u90E8\",\n      style: {\n        width: 80\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 33\n      }\n    }, \"\\u5168\\u90E8\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 33\n      }\n    }, \"\\u5DF2\\u6388\\u6743\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 33\n      }\n    }, \"\\u672A\\u6388\\u6743\")))), /*#__PURE__*/React.createElement(FormItem, {\n      label: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      style: {\n        margin: \"0 20px\",\n        width: 100\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }\n    }, \"\\u67E5\\u8BE2\"), /*#__PURE__*/React.createElement(_Button, {\n      style: {\n        width: 100\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 21\n      }\n    }, \"\\u91CD\\u7F6E\")));\n  }\n\n}\n\nFilterForm = _Form.create({})(FilterForm);\n\nclass OpenCityForm extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const formItemLayout = {\n      labelCol: {\n        span: 5\n      },\n      wrapperCol: {\n        span: 19\n      }\n    };\n    const {\n      getFieldDecorator\n    } = this.props.form;\n    return /*#__PURE__*/React.createElement(_Form, {\n      layout: \"horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u9009\\u62E9\\u57CE\\u5E02\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }\n    }), getFieldDecorator('city_id', {\n      initialValue: ''\n    })( /*#__PURE__*/React.createElement(_Select, {\n      style: {\n        width: 100\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 33\n      }\n    }, \"\\u5317\\u4EAC\\u5E02\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 33\n      }\n    }, \"\\u5929\\u6D25\\u5E02\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 33\n      }\n    }, \"\\u897F\\u5B89\\u5E02\")))), /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u8425\\u8FD0\\u6A21\\u5F0F\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }\n    }), getFieldDecorator('op_mode', {\n      initialValue: 1\n    })( /*#__PURE__*/React.createElement(RadioGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(_Radio, {\n      value: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 33\n      }\n    }, \"\\u81EA\\u8425\"), /*#__PURE__*/React.createElement(_Radio, {\n      value: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 33\n      }\n    }, \"\\u52A0\\u76DF\")))), /*#__PURE__*/React.createElement(FormItem, Object.assign({\n      label: \"\\u7528\\u8F66\\u6A21\\u5F0F\"\n    }, formItemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }\n    }), getFieldDecorator('use_mode', {\n      initialValue: ''\n    })( /*#__PURE__*/React.createElement(_Select, {\n      style: {\n        width: 100\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 33\n      }\n    }, \"\\u5168\\u90E8\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 33\n      }\n    }, \"\\u6307\\u5B9A\\u505C\\u8F66\\u70B9\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 33\n      }\n    }, \"\\u7981\\u505C\\u533A\")))));\n  }\n\n}\n\nOpenCityForm = _Form.create({})(OpenCityForm); // horizontal： label和组件都是各站一行\n\nexport default City; // wrappedComponentRef： 当form表单导出组件，此时如果要获取此组件的实例，使用ref是不行的，需要使用wrappedComponentRef","map":{"version":3,"sources":["/Users/xumeihong/Documents/code/git/react/demos/demo2/src/pages/city/index.js"],"names":["React","Axios","Utils","FormItem","Item","Option","RadioGroup","Group","City","Component","constructor","props","requestList","ajax","url","data","params","page","then","res","result","item_list","setState","list","map","item","index","key","pagination","current","catch","e","Error","handleOpenCity","isShowOpenCity","handleSubmit","openCityInfo","cityForm","form","getFieldsValue","success","error","state","componentDidMount","columns","title","dataIndex","render","mode","op_mode","city_admins","user_name","join","update_time","formatDate","marginTop","element","FilterForm","getFieldDecorator","initialValue","width","margin","create","OpenCityForm","formItemLayout","labelCol","span","wrapperCol"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Form, Card, Button, Select, Table, Modal, Radio, message } from 'antd';\nimport Axios from '../../axios/index';\nimport Utils from '../../utils/utils';\n\nconst FormItem = Form.Item;\nconst Option = Select.Option;\nconst RadioGroup = Radio.Group;\n\n\nclass City extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isShowOpenCity: false,\n        };\n        this.params = {\n            page: 1,\n        };\n        this.cityForm = null;\n    }\n    componentDidMount() {\n        const columns = [\n            {\n                title: '城市id',\n                dataIndex: 'id'\n            },\n            {\n                title: '城市名称',\n                dataIndex: 'name'\n            },\n            {\n                title: '用车模式',\n                dataIndex: 'mode',\n                render: (mode) =>{\n                    return mode == 1 ? \"指定停车点\" : \"禁停区\"\n                }\n            },\n            {\n                title: '营运模式',\n                dataIndex: 'op_mode',\n                render: (op_mode) =>{\n                    return op_mode == 1 ? \"自营\" : \"加盟\";\n                }\n            },\n            {\n                title: '授权加盟商',\n                dataIndex: 'franchisee_name'\n            },\n            {\n                title: '城市管理员',\n                dataIndex: 'city_admins',\n                render: (city_admins) => {\n                    return city_admins.map(item => {\n                        return item.user_name;\n                    }).join('|');\n                }\n            },\n            {\n                title: '城市开通时间',\n                dataIndex: 'open_time'\n            },\n            {\n                title: '操作时间',\n                dataIndex: 'update_time',\n                render: (update_time) => {\n                    return Utils.formatDate(update_time)\n                }\n            },\n            {\n                title: '操作人',\n                dataIndex: 'sys_user_name'\n            },\n        ];\n        this.setState({\n            columns\n        });\n        this.requestList();\n    }\n\n    // 默认请求接口数据\n    requestList = () => {\n        Axios.ajax({\n            url: '/demo/mock/open_city',\n            data: {\n                params: {\n                    page: this.params.page,\n                }\n            }\n        }).then((res) => {\n            if (res && res.result.item_list) {\n                this.setState({\n                    list: res.result.item_list.map((item, index) => {\n                        item.key = index;\n                        return item;\n                    }),\n                    pagination: Utils.pagination(res, (current) => {\n                        this.params.page = current;\n                        this.requestList();\n                    })\n                })\n            }\n        }).catch(e => {\n            throw new Error(e);\n        });\n    }\n    // 开通城市\n    handleOpenCity = () => {\n        this.setState({\n            isShowOpenCity: true,\n        });\n\n    }\n\n    // 提交开通城市\n    handleSubmit = () => {\n        let openCityInfo = this.cityForm.props.form.getFieldsValue();\n        Axios.ajax({\n            url: \"/demo/mock/city/open\",\n            data: {\n                params: openCityInfo,\n            }\n        }).then(data => {\n            message.success(data.result);\n            this.setState({\n                isShowOpenCity: false\n            });\n        }).catch( error =>{\n            throw new Error(error);\n        });\n    }\n\n    render() {\n        return (\n            <div>\n                <Card>\n                    <FilterForm />\n                </Card>\n                <Card style={{ marginTop: 10 }}>\n                    <Button type=\"primary\" onClick={this.handleOpenCity}>开通城市</Button>\n                </Card>\n                <div className=\"content-wrap\">\n                    <Table\n                        bordered\n                        columns={this.state.columns}\n                        dataSource={this.state.list}\n                        pagination={this.state.pagination}\n                    />\n                </div>\n                <Modal\n                    title=\"开通城市\"\n                    visible={this.state.isShowOpenCity}\n                    onOk={this.handleSubmit}\n                    onCancel={() => {\n                        this.setState({\n                            isShowOpenCity: false,\n                        });\n                    }}\n                >\n                    <OpenCityForm wrappedComponentRef={(element) => {\n                        this.cityForm = element\n                    }} />\n                </Modal>\n            </div>\n        );\n    }\n}\n\nclass FilterForm extends React.Component {\n    render() {\n        const { getFieldDecorator } = this.props.form;\n        return (\n            <Form layout=\"inline\">\n                <FormItem label=\"城市\">\n                    {\n                        getFieldDecorator(\"city_id\", {\n                            initialValue: \"\"\n                        })(\n                            <Select placeholder=\"全部\" style={{ width: 80 }}>\n                                <Option value=\"\">全部</Option>\n                                <Option value=\"1\">北京市</Option>\n                                <Option value=\"2\">天津市</Option>\n                                <Option value=\"3\">深圳市</Option>\n                            </Select>\n                        )\n                    }\n                </FormItem>\n                <FormItem label=\"用车模式\">\n                    {\n                        getFieldDecorator(\"mode\", {\n                            initialValue: \"\"\n                        })(\n                            <Select placeholder=\"全部\" style={{ width: 130 }}>\n                                <Option value=\"\">全部</Option>\n                                <Option value=\"1\">指定停车点模式</Option>\n                                <Option value=\"2\">禁停区模式</Option>\n                            </Select>\n                        )\n                    }\n                </FormItem>\n                <FormItem label=\"运营模式\">\n                    {\n                        getFieldDecorator(\"op_mode\", {\n                            initialValue: \"\"\n                        })(\n                            <Select style={{ width: 80 }}>\n                                <Option value=\"\">全部</Option>\n                                <Option value=\"1\">自营</Option>\n                                <Option value=\"2\">加盟</Option>\n                            </Select>\n                        )\n                    }\n                </FormItem>\n                <FormItem label=\"加盟商授权状态\">\n                    {\n                        getFieldDecorator(\"auth_status\", {\n                            initialValue: \"\"\n                        })(\n                            <Select placeholder=\"全部\" style={{ width: 80 }}>\n                                <Option value=\"\">全部</Option>\n                                <Option value=\"1\">已授权</Option>\n                                <Option value=\"2\">未授权</Option>\n                            </Select>\n                        )\n                    }\n                </FormItem>\n                <FormItem label=\"\">\n                    <Button type=\"primary\" style={{ margin: \"0 20px\", width: 100 }}>查询</Button>\n                    <Button style={{ width: 100 }}>重置</Button>\n                </FormItem>\n            </Form>\n        );\n    }\n}\nFilterForm = Form.create({})(FilterForm);\n\n\nclass OpenCityForm extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n    render() {\n        const formItemLayout = {\n            labelCol: {\n                span: 5\n            },\n            wrapperCol: {\n                span: 19\n            }\n        };\n        const { getFieldDecorator } = this.props.form\n        return (\n            <Form layout=\"horizontal\">\n                <FormItem label=\"选择城市\" {...formItemLayout}>\n                    {\n                        getFieldDecorator('city_id', {\n                            initialValue: ''\n                        })(\n                            <Select style={{ width: 100 }}>\n                                <Option value=\"1\">北京市</Option>\n                                <Option value=\"2\">天津市</Option>\n                                <Option value=\"3\">西安市</Option>\n                            </Select>\n                        )\n                    }\n                </FormItem>\n                <FormItem label=\"营运模式\" {...formItemLayout}>\n                    {\n                        getFieldDecorator('op_mode', {\n                            initialValue: 1\n                        })(\n                            <RadioGroup >\n                                <Radio value={1}>自营</Radio>\n                                <Radio value={2}>加盟</Radio>\n                            </RadioGroup>\n                        )\n                    }\n                </FormItem>\n                <FormItem label=\"用车模式\" {...formItemLayout}>\n                    {\n                        getFieldDecorator('use_mode', {\n                            initialValue: ''\n                        })(\n                            <Select style={{ width: 100 }}>\n                                <Option value=\"\">全部</Option>\n                                <Option value=\"1\">指定停车点</Option>\n                                <Option value=\"2\">禁停区</Option>\n                            </Select>\n                        )\n                    }\n                </FormItem>\n            </Form>\n        );\n    }\n}\nOpenCityForm = Form.create({})(OpenCityForm);\n\n// horizontal： label和组件都是各站一行\nexport default City;\n\n\n// wrappedComponentRef： 当form表单导出组件，此时如果要获取此组件的实例，使用ref是不行的，需要使用wrappedComponentRef"]},"metadata":{},"sourceType":"module"}